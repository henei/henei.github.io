(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3751c870"],{"39bb":function(t,e,a){},"5e1e":function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return o})),a.d(e,"c",(function(){return s}));var n=a("b775");function r(t){return Object(n["a"])({url:"/metadata/baseInfo/queryTableBaseInfoByQualifiedName",method:"post",data:t})}function o(t){return Object(n["a"])({url:"permission/system/queryFieldInfo",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/metadata/sysUser/queryUserInfoGroupInfoByUserName",method:"post",data:t})}},"5ee7":function(t,e,a){"use strict";var n=a("39bb"),r=a.n(n);r.a},"696b":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"a",(function(){return o})),a.d(e,"x",(function(){return s})),a.d(e,"f",(function(){return l})),a.d(e,"v",(function(){return i})),a.d(e,"c",(function(){return u})),a.d(e,"l",(function(){return c})),a.d(e,"q",(function(){return d})),a.d(e,"g",(function(){return b})),a.d(e,"o",(function(){return m})),a.d(e,"n",(function(){return f})),a.d(e,"r",(function(){return p})),a.d(e,"t",(function(){return h})),a.d(e,"e",(function(){return y})),a.d(e,"s",(function(){return v})),a.d(e,"m",(function(){return g})),a.d(e,"u",(function(){return _})),a.d(e,"j",(function(){return N})),a.d(e,"B",(function(){return T})),a.d(e,"z",(function(){return C})),a.d(e,"C",(function(){return O})),a.d(e,"A",(function(){return j})),a.d(e,"k",(function(){return D})),a.d(e,"h",(function(){return I})),a.d(e,"p",(function(){return q})),a.d(e,"d",(function(){return w})),a.d(e,"w",(function(){return P})),a.d(e,"i",(function(){return k})),a.d(e,"y",(function(){return x})),a.d(e,"D",(function(){return L}));var n=a("b775");function r(t){return Object(n["a"])({url:"/metadata/baseInfo/tbAdvancedSearch?searchType=fuzzy",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/metadata/baseInfo/tbAdvancedSearch?searchType=precise",method:"post",data:t})}function s(t){return Object(n["a"])({url:"metadata/baseInfo/tbFuzzySearch",method:"post",data:t})}function l(t){return Object(n["a"])({url:"metadata/baseInfo/tbPreciseSearch",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/metadata/baseInfo/queryFieldInfo",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/metadata/baseInfo/getBloodRelationFromAtlas",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/metadata/baseInfo/queryBloodShipEntityExcludeDeletedOptional",method:"post",data:t})}function d(t){return Object(n["a"])({url:"/metadata/baseInfo/entityDDL",method:"post",data:t})}function b(t){return Object(n["a"])({url:"/metadata/baseInfo/exportEntityDDL",method:"post",data:t,responseType:"blob"})}function m(t){return Object(n["a"])({url:"/metadata/baseInfo/queryClusterList",method:"get",data:t})}function f(t){return Object(n["a"])({url:"/metadata/baseInfo/queryClusterDataBases",method:"post",data:t})}function p(t){return Object(n["a"])({url:"/metadata/baseInfo/queryDataBaseTables",method:"post",data:t})}function h(t){return Object(n["a"])({url:"/metadata/baseInfo/queryDatabaseLikeSearch",method:"post",data:t})}function y(t){return Object(n["a"])({url:"/metadata/baseInfo/dbFuzzySearch",method:"post",data:t})}function v(t){return Object(n["a"])({url:"/metadata/baseInfo/queryDatabaseInfoByBasicSearch",method:"post",data:t})}function g(t){return Object(n["a"])({url:"/metadata/baseInfo/queryByBasicSearchFilter",method:"post",data:t})}function _(t){return Object(n["a"])({url:"/metadata/baseInfo/queryDbContainsTablesNum",method:"post",data:t})}function N(t){return Object(n["a"])({url:"/metadata/hiveMeasureTablePartitions/judgeTableType",method:"post",data:t})}function T(t){return Object(n["a"])({url:"/metadata/hiveMeasureTablePartitions/tablePartitionFormExhibition",method:"post",data:t})}function C(t){return Object(n["a"])({url:"/metadata/hiveMeasureTablePartitions/showProvinces",method:"post",data:t})}function O(t){return Object(n["a"])({url:"/metadata/hiveMeasureTablePartitions/tablePartitionHistogramExhibition",method:"post",data:t})}function j(t){return Object(n["a"])({url:"/metadata/hiveMeasureTablePartitions/showProvincesPages",method:"post",data:t})}function D(t){return Object(n["a"])({url:"/metadata/baseInfo/queryAllDatabaseByCluster",method:"post",data:t})}function I(t){return Object(n["a"])({url:"metadata/baseInfo/exportQueryByBasicSearchFilter",method:"post",data:t,responseType:"blob"})}function q(t){return Object(n["a"])({url:"/metadata/baseInfo/queryClusterSupportConnect",method:"post",data:t})}function w(t){return Object(n["a"])({url:"metadata/baseInfo/queryTableExampleDataByTableQualifiedName",method:"post",data:t,headers:{"Content-Type":"application/json"}})}function P(t){return Object(n["a"])({url:"metadata/baseInfo/".concat(t,"/classifications"),method:"get"})}function k(t){return Object(n["a"])({url:"/metadata/queryTableHistory/insertQueryHistory",method:"post",data:t})}function x(t){return Object(n["a"])({url:"/metadata/queryTableHistory/selectQueryHistoryLimit20",method:"post",data:t})}function L(t){return Object(n["a"])({url:"/metadata/queryTableHistory/updateQueryHistoryStatus",method:"post",data:t})}},"944e3":function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"a",(function(){return o})),a.d(e,"f",(function(){return s})),a.d(e,"b",(function(){return l})),a.d(e,"d",(function(){return i})),a.d(e,"g",(function(){return u}));var n=a("b775");function r(t){return Object(n["a"])({url:"/metadata/myCollect/insertMyCollect",method:"post",data:t})}function o(t){return Object(n["a"])({url:"/metadata/myCollect/cancelOneMyCollect",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/metadata/myCollect/queryMyDatabaseCollectContainsTableNum",method:"post",data:t})}function l(t){return Object(n["a"])({url:"/metadata/myCollect/isExistenceMyCollectId",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/metadata/myCollect/queryMyCollect",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/metadata/baseInfo/queryTableAuditsByGuid",method:"post",data:t})}},d4bb:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-card",[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"inf_header",staticStyle:{"margin-top":"10px"}},[t._v(t._s(t.database.databaseName)+" ")]),t._v(" "),a("i",{class:[t.isCollected?"el-icon-star-on":"el-icon-star-off","click-blue"],attrs:{title:t.collectedLabel},on:{click:t.collectDatabase}})])]),t._v(" "),a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"基本库信息",name:"database"}},[a("el-collapse",{attrs:{value:["1"]}},[a("el-collapse-item",{staticClass:"dell",attrs:{title:"库信息",name:"1"}},[a("div",{attrs:{id:"loading-area"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("span",{staticClass:"dell"},[t._v("库名："+t._s(t.database.databaseName)+" ")])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-popover",{attrs:{placement:"top-start",width:"200",trigger:"hover"}},[a("div",[t._v("姓名："+t._s(t.DatabaseDutyPeopleInfo.userName))]),t._v(" "),a("div",[t._v("联系方式："+t._s(t.DatabaseDutyPeopleInfo.userPhone))]),t._v(" "),a("div",[t._v("所属工作组：\n                    "),t._l(t.DatabaseDutyPeopleInfo.userGroups,(function(e){return a("div",{key:e.id},[a("router-link",{attrs:{to:{path:"/permission/mygroup/detail/"+e.id}}},[a("span",{staticStyle:{color:"rgb(64, 158, 255)"}},[t._v(t._s(e.groupAlias?e.groupAlias:e.groupName))])])],1)}))],2),t._v(" "),a("span",{staticClass:"dell",attrs:{slot:"reference"},slot:"reference"},[t._v("库负责人："+t._s(t.database.databaseOwner)+" ")])])],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"dell"},[t._v("创建时间："+t._s(t.database.databaseCreatTime)+" ")])])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("span",{staticClass:"dell"},[t._v("集群："+t._s(t.database.clusterName))])]),t._v(" "),a("el-col",{attrs:{span:8}},[a("span",{staticClass:"dell"},[t._v("表个数："+t._s(t.tableNum))])])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"dell"},[t._v("HDFS地址："+t._s(t.database.databaseLocation)+" ")])])],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("span",{staticClass:"dell"},[t._v("描述："+t._s(t.database.databaseDescription)+" ")])])],1)],1)])],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"表信息",name:"table"}},[a("el-row",{staticClass:"margin-b-20p"},[a("span",{staticClass:"dell"},[t._v("当前库名:"+t._s(t.database.databaseName))]),t._v(" "),a("span",{staticClass:"dell",staticStyle:{"margin-left":"10px"}},[t._v("表个数:"+t._s(t.tableNum))]),t._v(" "),a("el-input",{staticStyle:{width:"24%","margin-left":"20px"},attrs:{placeholder:"输入要查找得表名",size:"mini"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchClick()}},model:{value:t.queryTableName,callback:function(e){t.queryTableName=e},expression:"queryTableName"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"mini"},on:{click:t.searchClick}},[t._v("查询")]),t._v(" "),a("div",{staticStyle:{display:"inline-block",float:"right"}},[a("el-button",{attrs:{size:"mini"},on:{click:t.exportExcel}},[t._v("导出excel")])],1)],1),t._v(" "),a("el-row",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],attrs:{data:t.databaseTableDate}},[a("el-table-column",{attrs:{label:"表名",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:{path:"/datesource/information/"+e.row.tableName,query:{guid:e.row.guid,qualifiedName:e.row.tableQualifiedName}}}},[a("span",{staticClass:"click-blue"},[t._v(t._s(e.row.tableName))])])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"创建时间",align:"center",prop:"createTime"}}),t._v(" "),a("el-table-column",{attrs:{label:"负责人",align:"center",prop:"dataDutyPeople"}}),t._v(" "),a("el-table-column",{attrs:{label:"表注释",align:"center",prop:"tableComment","show-overflow-tooltip":""}})],1)],1),t._v(" "),a("el-row",{staticStyle:{float:"right"}},[a("el-button",{attrs:{disabled:1===t.databaseTableCurrentPage,size:"mini"},on:{click:t.handlePageChangePre}},[t._v("上一页")]),t._v(" "),a("div",{staticClass:"page_num"},[t._v(t._s(t.databaseTableCurrentPage)),2!==t.databaseTableTotal?a("span",[t._v("...")]):t._e()]),t._v(" "),a("el-button",{attrs:{disabled:2===t.databaseTableTotal,size:"mini"},on:{click:t.handlePageChangeNext}},[t._v("下一页")])],1)],1)],1)],1)},r=[],o=a("696b"),s=a("944e3"),l=a("5e1e"),i={name:"库基本信息",mounted:function(){this.getList(),this.getTableNum()},data:function(){return{database:{databaseName:""},databaseTableCurrentPage:1,databaseTableDate:[],databaseTableTotal:0,queryTableName:"",isCollected:!1,collectedLabel:"收藏",activeName:"database",collectedId:"",operateFlag:0,tableLoading:!1,tableNum:0,DatabaseDutyPeopleInfo:{}}},methods:{getTableNum:function(){var t=this;Object(o["u"])(this.$route.query.qualifiedName).then((function(e){t.tableNum=e.data}))},getList:function(){var t=this,e=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",target:document.querySelector("#loading-area")});Object(o["s"])(this.$route.query.qualifiedName).then((function(a){t.database=a.data,t.database.databaseOwner&&t.getDatabaseDutyPeopleInfo(t.database.databaseOwner),t.judgeDatabase(),t.getTableList(),e.close()}))},getTableList:function(){var t=this;this.tableLoading=!0;var e={pageNo:this.databaseTableCurrentPage,pageSize:10,condition:"AND",typeName:"hive_table",criterias:[{attributeName:"dbName",operator:"eq",attributeValue:this.database.databaseName}],attributes:["createTime","qualifiedName","comment","owner"]};Object(o["m"])(e).then((function(e){t.databaseTableDate=e.data.records,t.databaseTableTotal=e.total,t.tableLoading=!1}))},handlePageChangePre:function(){this.databaseTableCurrentPage-=1,0===this.operateFlag&&this.getTableList(),1===this.operateFlag&&this.searchTable()},handlePageChangeNext:function(){this.databaseTableCurrentPage+=1,0===this.operateFlag&&this.getTableList(),1===this.operateFlag&&this.searchTable()},searchClick:function(){this.operateFlag=1,this.databaseTableCurrentPage=1,this.searchTable()},searchTable:function(){var t=this,e={pageNo:this.databaseTableCurrentPage,pageSize:10,condition:"AND",typeName:"hive_table",criterias:[{attributeName:"dbName",operator:"startsWith",attributeValue:this.database.databaseName},{attributeName:"name",operator:"contains",attributeValue:this.queryTableName}],attributes:["createTime","qualifiedName","comment","owner"]};Object(o["m"])(e).then((function(e){t.databaseTableDate=e.data.records,t.databaseTableTotal=e.data.total}))},judgeDatabase:function(){var t=this,e={databaseName:this.database.databaseName,clusterName:this.database.clusterName,collectType:"hive_db"};Object(s["b"])(e).then((function(e){for(var a in e.data)t.isCollected="true"===a,t.collectedId=e.data[a];t.isCollected?t.collectedLabel="取消收藏":t.collectedLabel="收藏"}))},collectDatabase:function(){var t=this,e={databaseName:this.database.databaseName,databaseQualifiedName:this.database.databaseQualifiedName,databaseQuid:this.database.databaseGuid,clusterName:this.database.clusterName,collectType:"hive_db"};this.isCollected&&Object(s["a"])({id:this.collectedId}).then((function(e){t.isCollected=!t.isCollected,t.collectedLabel="收藏"})),this.isCollected||Object(s["c"])(e).then((function(e){t.collectedId=e.data.id,t.isCollected=!t.isCollected,t.collectedLabel="取消收藏!"}))},exportExcel:function(){var t=this,e={attributes:["createTime","qualifiedName","comment","owner"],condition:"AND",criterias:[{attributeName:"dbName",operator:"eq",attributeValue:this.database.databaseName},{attributeName:"name",operator:"contains",attributeValue:this.queryTableName}],pageNo:1,pageSize:10,typeName:"hive_table"};document.createElement("a");Object(o["h"])(e).then((function(e){t.downloadEXcel(e)})).catch((function(t){console.log(t)}))},downloadEXcel:function(t){if(t){var e=window.URL.createObjectURL(new Blob([t])),a=document.createElement("a");a.style.display="none",a.href=e,a.setAttribute("download",this.database.databaseName+".xlsx"),document.body.appendChild(a),a.click()}},getDatabaseDutyPeopleInfo:function(t){var e=this;Object(l["c"])(t).then((function(t){e.DatabaseDutyPeopleInfo=t.data}))}}},u=i,c=(a("5ee7"),a("2877")),d=Object(c["a"])(u,n,r,!1,null,null,null);e["default"]=d.exports}}]);