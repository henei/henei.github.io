(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6dea8f6e"],{1063:function(t,e,a){},1276:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{margin:"0 20px"}},[a("el-row",{staticStyle:{"margin-bottom":"10px"}},[a("label",{staticStyle:{"font-size":"14px"}},[t._v("下游表详情查看")])]),t._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-input",{staticStyle:{width:"60%"},attrs:{size:"mini",placeholder:"根据表名搜索"},model:{value:t.queryTableName,callback:function(e){t.queryTableName=e},expression:"queryTableName"}}),t._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:t.search}},[t._v("查询")])],1),t._v(" "),a("el-col",{staticStyle:{"text-align":"right","margin-bottom":"10px"},attrs:{span:12}},[a("span",{staticStyle:{color:"rgb(96, 98, 102)","font-weight":"500","font-size":"14px"}},[t._v("深度：")]),t._v(" "),a("el-select",{staticStyle:{width:"80px"},attrs:{"allow-create":"",filterable:"",size:"mini"},on:{change:t.getDownStreamTableDetail},model:{value:t.depth,callback:function(e){t.depth=e},expression:"depth"}},[a("el-option",{attrs:{label:"1",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"2",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"3",value:"3"}}),t._v(" "),a("el-option",{attrs:{label:"4",value:"4"}}),t._v(" "),a("el-option",{attrs:{label:"5",value:"5"}}),t._v(" "),a("el-option",{attrs:{label:"6",value:"6"}}),t._v(" "),a("el-option",{attrs:{label:"7",value:"7"}}),t._v(" "),a("el-option",{attrs:{label:"8",value:"8"}}),t._v(" "),a("el-option",{attrs:{label:"9",value:"9"}}),t._v(" "),a("el-option",{attrs:{label:"10",value:"10"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.tableLoading,expression:"tableLoading"}],attrs:{data:t.tableData,"row-key":"tableGuid","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[a("router-link",{attrs:{to:{path:"/datesource/information/"+e.row.tableName,query:{guid:e.row.tableGuid,qualifiedName:e.row.tableQualifiedName}}}},[a("a",{staticStyle:{color:"rgb(64, 158, 255)"}},[t._v(t._s(e.row.tableName))])])]}}])},[a("template",{slot:"header"},[a("span",[t._v("表名")])])],2),t._v(" "),a("el-table-column",{attrs:{label:"表层级",align:"center",prop:"rank",width:"100"}}),t._v(" "),a("el-table-column",{attrs:{label:"直接下游表个数",align:"center",prop:"directDownStreamTableNum",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{label:"所有下游表个数",align:"center",prop:"allDownStreamTableNum",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{label:"负责人",align:"center",prop:"tableOwner",width:"240"}})],1)],1)],1)],1)},n=[],i=(a("ac6a"),a("ccd4")),r={data:function(){return{tableData:[],originTableData:[],tableLoading:!1,allData:[],depth:"5",queryTableName:""}},methods:{getDownStreamTableDetail:function(){var t=this;this.tableLoading=!0;var e={tableGuid:this.$route.query.guid,depth:this.depth};this.tableData=[],Object(i["e"])(e).then((function(e){var a=e.data.downStreamTableList;a.forEach((function(t){if(0!=t.directDownStreamTableNum){t.children=[];var a=function(a){e.data.downStreamTableList.map((function(e){if(e.tableGuid===a&&e.rank===t.rank+1){if(-1!==JSON.stringify(t.children).indexOf(JSON.stringify(e)))return;t.children.push(e)}}))};for(var l in t.directDownStreamTableGuidNames)a(l)}})),console.log(a),a.forEach((function(e){1===e.rank&&t.tableData.push(e)})),t.originTableData=t.tableData.slice(),console.log(t.tableData),t.tableLoading=!1}))},search:function(){var t=this;if(this.tableLoading=!0,""===this.queryTableName)return this.tableData=this.originTableData,void(this.tableLoading=!1);this.tableData=[],this.originTableData.forEach((function(e){t.isCotainer(e)})),this.tableLoading=!1},isCotainer:function(t){var e=this;-1!==t.tableName.indexOf(this.queryTableName)?this.tableData.push(t):t.children&&t.children.forEach((function(t){e.isCotainer(t)}))}},created:function(){this.getDownStreamTableDetail()}},o=r,s=(a("a0f0"),a("2877")),u=Object(s["a"])(o,l,n,!1,null,null,null);e["default"]=u.exports},a0f0:function(t,e,a){"use strict";var l=a("1063"),n=a.n(l);n.a},ccd4:function(t,e,a){"use strict";a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i})),a.d(e,"e",(function(){return r})),a.d(e,"d",(function(){return o})),a.d(e,"b",(function(){return s}));var l=a("b775");function n(t){return Object(l["a"])({url:"/metadata/clusterResourceClean/searchForResourceCleanPages",method:"post",data:t})}function i(t){return Object(l["a"])({url:"/metadata/baseInfo/deleteUnUsedTable",method:"post",data:t})}function r(t){return Object(l["a"])({url:"/metadata/baseInfo/queryTableBloodShip",method:"post",data:t})}function o(){return Object(l["a"])({url:"/metadata/sysClusterInfo/queryClusterBriefInfoList",method:"get"})}function s(t){return Object(l["a"])({url:"/metadata/clusterResourceClean/exportExcelResourceCleanPages",method:"post",data:t,responseType:"blob"})}}}]);