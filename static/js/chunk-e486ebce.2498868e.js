(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e486ebce"],{"00a5":function(e,t,a){},"0124":function(e,t,a){"use strict";var s=a("fd1a"),i=a.n(s);i.a},"12a7":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"createForm",attrs:{model:e.createForm,rules:e.createFormRules,"label-width":"180px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"接口机名称：",prop:"interfaceMachineName"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"接口机名称",size:"small"},model:{value:e.createForm.interfaceMachineName,callback:function(t){e.$set(e.createForm,"interfaceMachineName",t)},expression:"createForm.interfaceMachineName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"接口机IP：",prop:"interfaceMachineIp"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"接口机IP",size:"small"},model:{value:e.createForm.interfaceMachineIp,callback:function(t){e.$set(e.createForm,"interfaceMachineIp",t)},expression:"createForm.interfaceMachineIp"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"接口机用户名：",prop:"interfaceMachineUser"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"接口机用户名",size:"small"},model:{value:e.createForm.interfaceMachineUser,callback:function(t){e.$set(e.createForm,"interfaceMachineUser",t)},expression:"createForm.interfaceMachineUser"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"接口机密码：",prop:"interfaceMachinePassword"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{type:"password",placeholder:"接口机密码",size:"small"},model:{value:e.createForm.interfaceMachinePassword,callback:function(t){e.$set(e.createForm,"interfaceMachinePassword",t)},expression:"createForm.interfaceMachinePassword"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"接口机所属集群：",prop:"clusterName"}},[a("el-select",{attrs:{filterable:"",placeholder:"接口机所属集群",size:"small"},model:{value:e.createForm.clusterName,callback:function(t){e.$set(e.createForm,"clusterName",t)},expression:"createForm.clusterName"}},e._l(e.clusterList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.clusterName,value:e.clusterName}})})),1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.onAddCluster}},[e._v("新增集群")])],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"接口机描述：",prop:"interfaceMachineDescription"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"接口机描述",size:"small"},model:{value:e.createForm.interfaceMachineDescription,callback:function(t){e.$set(e.createForm,"interfaceMachineDescription",t)},expression:"createForm.interfaceMachineDescription"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"接口机数据存放路径："}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"接口机数据存放路径",size:"small"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addLocal(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:e.addLocal}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"接口机ssh端口：",prop:"sshPort"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"接口机ssh端口",size:"small"},model:{value:e.createForm.sshPort,callback:function(t){e.$set(e.createForm,"sshPort",t)},expression:"createForm.sshPort"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{staticStyle:{width:"180px"},attrs:{span:4}},[a("el-tooltip",{staticClass:"left",attrs:{effect:"light",content:"请勾选默认的接口机数据存放路径",placement:"top"}},[a("i",{directives:[{name:"show",rawName:"v-show",value:0!=e.pathList.length,expression:"pathList.length != 0"}],staticClass:"el-icon-info",staticStyle:{float:"right",padding:"6px 20px 0 0","font-size":"16px",color:"rgb(0,204,255)"}})])],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",[a("el-checkbox-group",{attrs:{max:1},model:{value:e.selectedPath,callback:function(t){e.selectedPath=t},expression:"selectedPath"}},e._l(e.pathList,(function(t){return a("el-tag",{key:t,staticStyle:{margin:"0 10px 10px 0"},attrs:{effect:"plain",closable:""},on:{close:function(a){return e.handleClose(t)}}},[a("el-checkbox",{key:t,attrs:{label:t}})],1)})),1)],1)])],1)],1),e._v(" "),e.open?a("el-dialog",{attrs:{title:"添加集群",top:"40px",visible:e.open,width:"1000px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("cluster-add",{ref:"modelFromSon",on:{"close-add":e.addClusterClose}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addCluster}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.open=!1}}},[e._v("取 消")])],1)],1):e._e()],1)},i=[],r=(a("c5f6"),a("ce45")),l=a("9835"),n=a("6941"),o={components:{"cluster-add":n["default"]},props:{MachineInfo:{},Mark:Number},data:function(){return{dialogCreateFormVisible:!1,open:!1,clusterList:[],createForm:{interfaceMachineName:"",interfaceMachineIp:"",interfaceMachineUser:"",interfaceMachinePassword:"",interfaceMachineDescription:"",clusterName:"",sshPort:""},createFormRules:{interfaceMachineName:[{required:!0,message:"接口机名称不能为空",trigger:"blur"}],interfaceMachineIp:[{required:!0,message:"接口机IP不能为空",trigger:"blur"}],interfaceMachineUser:[{required:!1,message:"接口机用户名不能为空",trigger:"blur"}],interfaceMachinePassword:[{required:!1,message:"接口机密码不能为空",trigger:"blur"}],interfaceMachineDescription:[{required:!1,message:"接口机描述不能为空",trigger:"blur"}],clusterName:[{required:!0,message:"请选择接口机所属集群",trigger:"change"}],sshPort:[{required:!0,message:"接口机ssh端口不能为空",trigger:"blur"}]},editMachineId:void 0,pathList:[],inputValue:"",selectedPath:[],interfaceMachineDataPath:""}},created:function(){this.queryClusterInfoList(),1===this.Mark&&this.handleUpdate()},methods:{queryClusterInfoList:function(){var e=this;this.clusterList=[],Object(l["j"])().then((function(t){e.clusterList=t.data}))},onAddCluster:function(){this.open=!0},addCluster:function(){this.$refs.modelFromSon.submitForm()},addClusterClose:function(){this.open=!1,this.queryClusterInfoList()},submitCreateForm:function(){var e=this;this.$refs["createForm"].validate((function(t){if(t){if(0===e.pathList.length)return e.msgError("请添加接口机数据存放路径");if(0===e.selectedPath.length)return e.msgError("请勾选默认的接口机数据存放路径");e.createForm.pathList=e.pathList,e.createForm.interfaceMachineDataPath=e.selectedPath[0],Object(r["a"])(e.createForm).then((function(t){200==t.code?(e.msgSuccess("新增接口机成功"),e.closeCreateForm()):e.msgError(t.msg)}))}}))},closeCreateForm:function(){this.$refs["createForm"].resetFields(),this.dialogCreateFormVisible=!1,this.createForm.interfaceMachineName="",this.createForm.interfaceMachineIp="",this.createForm.interfaceMachineUser="",this.createForm.interfaceMachinePassword="",this.createForm.interfaceMachineDescription="",this.createForm.clusterName="",this.createForm.sshPort="",this.$emit("close-addMachine")},handleUpdate:function(){this.editMachineId=this.MachineInfo.interfaceMachineId,this.createForm.interfaceMachineName=this.MachineInfo.interfaceMachineName,this.createForm.interfaceMachineIp=this.MachineInfo.interfaceMachineIp,this.createForm.interfaceMachineUser=this.MachineInfo.interfaceMachineUser,this.createForm.interfaceMachinePassword=this.MachineInfo.interfaceMachinePassword,this.createForm.interfaceMachineDescription=this.MachineInfo.interfaceMachineDescription,this.createForm.clusterName=this.MachineInfo.clusterName,this.createForm.sshPort=this.MachineInfo.sshPort,this.pathList=this.MachineInfo.pathList,this.selectedPath[0]=this.MachineInfo.interfaceMachineDataPath},submitUpdateForm:function(){var e=this;this.$refs["createForm"].validate((function(t){if(t){if(0===e.pathList.length)return e.msgError("请添加接口机数据存放路径");if(0===e.selectedPath.length)return e.msgError("请勾选默认的接口机数据存放路径");e.createForm.pathList=e.pathList,e.createForm.interfaceMachineDataPath=e.selectedPath[0];var a=Object.assign({interfaceMachineId:e.editMachineId},e.createForm);console.log("updateObj  :",a),Object(r["c"])(a).then((function(t){200==t.code?(e.msgSuccess("修改接口机成功"),e.closeCreateForm()):e.msgError(t.msg)}))}}))},addLocal:function(){var e=this.inputValue;e&&this.pathList.push(e),this.inputValue=""},handleClose:function(e){console.log("tag :>> ",e),e===this.selectedPath[0]?(this.pathList.splice(this.pathList.indexOf(e),1),this.selectedPath=[]):this.pathList.splice(this.pathList.indexOf(e),1)}}},c=o,u=a("2877"),d=Object(u["a"])(c,s,i,!1,null,"70612161",null);t["default"]=d.exports},1934:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"databaseEmpowerment"},[a("div",{staticClass:"dbItem"},[a("div",{staticClass:"itemTitle"},[e._v("权限对象")]),e._v(" "),a("el-radio-group",{on:{change:e.authorityChange},model:{value:e.authorityObject,callback:function(t){e.authorityObject=t},expression:"authorityObject"}},[a("el-radio",{attrs:{label:"SERVER"}},[e._v("按集群添加")]),e._v(" "),a("el-radio",{attrs:{label:"DB"}},[e._v("按库添加")]),e._v(" "),a("el-radio",{attrs:{label:"TABLE"}},[e._v("按表添加")]),e._v(" "),a("el-radio",{attrs:{label:"COLUMN"}},[e._v("按字段添加")])],1)],1),e._v(" "),void 0!=e.authorityObject?a("div",{staticClass:"dbItem"},[a("div",{staticClass:"itemTitle"},[e._v("权限类型")]),e._v(" "),a("el-radio-group",{on:{change:e.authorityTypeChange},model:{value:e.authorityType,callback:function(t){e.authorityType=t},expression:"authorityType"}},e._l(e.idGive,(function(t){return a("el-radio",{key:t.id,attrs:{label:t.id}},[e._v(e._s(t.name))])})),1)],1):e._e(),e._v(" "),a("div",{staticClass:"itemFour"},["SERVER"===e.authorityObject&&void 0!=e.authorityType?a("div",[a("clusterSlec",{ref:"clusterSlec",attrs:{groupID:e.groupId,emailSelc:e.emailCheck,selcObj:e.authorityObject,selcType:e.authorityType},on:{"save-close":e.closeAuth}})],1):e._e(),e._v(" "),"DB"===e.authorityObject&&void 0!=e.authorityType?a("div",[a("baseSlec",{ref:"baseSlec",attrs:{groupID:e.groupId,emailSelc:e.emailCheck,selcObj:e.authorityObject,selcType:e.authorityType},on:{"save-close":e.closeAuth}})],1):e._e(),e._v(" "),"TABLE"===e.authorityObject&&void 0!=e.authorityType?a("div",[a("sheetSlec",{ref:"sheetSlec",attrs:{groupID:e.groupId,emailSelc:e.emailCheck,selcObj:e.authorityObject,selcType:e.authorityType},on:{"save-close":e.closeAuth}})],1):e._e(),e._v(" "),"COLUMN"===e.authorityObject&&void 0!=e.authorityType?a("div",[a("fieldSlec",{ref:"fieldSlec",attrs:{groupID:e.groupId,emailSelc:e.emailCheck,selcObj:e.authorityObject,selcType:e.authorityType},on:{"save-close":e.closeAuth}})],1):e._e()])])},i=[],r=(a("ac6a"),a("c5f6"),a("a855")),l=a("8758"),n=a("7e905"),o=a("4cf3"),c=a("9835"),u={components:{clusterSlec:r["default"],baseSlec:l["default"],sheetSlec:n["default"],fieldSlec:o["default"]},props:{groupId:Number,emailCheck:Boolean},created:function(){console.log("工作组id",this.groupId)},data:function(){return{authorityObject:void 0,authorityType:void 0,idGive:[]}},methods:{authorityChange:function(){var e=this;console.log("对象",this.authorityObject),this.idGive=[],this.authorityType=void 0;var t={dictType:"sys_data_permission",privilegeScope:this.authorityObject};Object(c["n"])(t).then((function(t){console.log(t),t.data.forEach((function(t){var a={};a.id=t.dictValue,a.name=t.dictValue,e.idGive.push(a)}))}))},authorityTypeChange:function(){},finishSelect:function(){switch(void 0!==this.authorityObject&&void 0!==this.authorityType||this.closeAuth(),this.authorityObject){case"SERVER":this.authorityType&&this.$refs.clusterSlec.finishSelc();break;case"DB":this.authorityType&&this.$refs.baseSlec.finishSelc();break;case"TABLE":this.authorityType&&this.$refs.sheetSlec.finishSelc();break;case"COLUMN":this.authorityType&&this.$refs.fieldSlec.finishSelc();break}},submitSelect:function(){switch(this.authorityObject){case"SERVER":this.authorityType&&this.$refs.clusterSlec.savaSelc();break;case"DB":this.authorityType&&this.$refs.baseSlec.savaSelc();break;case"TABLE":this.authorityType&&this.$refs.sheetSlec.savaSelc();break;case"COLUMN":this.authorityType&&this.$refs.fieldSlec.savaSelc();break}},closeAuth:function(){this.$emit("close-authority"),this.$store.commit("SET_FINISHLOADING",!1)}}},d=u,h=(a("8da8"),a("2877")),m=Object(h["a"])(d,s,i,!1,null,"218337dc",null);t["default"]=m.exports},"245d":function(e,t,a){},"27b8":function(e,t,a){"use strict";var s=a("775d"),i=a.n(s);i.a},"285d":function(e,t,a){"use strict";var s=a("00a5"),i=a.n(s);i.a},3684:function(e,t,a){},"3a8b":function(e,t,a){},"457f":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"itemInfo"},[a("el-card",{staticClass:"box-card"},[a("el-form",{attrs:{"label-width":"120px","label-position":"left"}},[a("el-row",[a("el-col",[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"当前工作组名称:"}},[a("span",[e._v(e._s(e.groupInfo.groupName))])])],1)],1),e._v(" "),a("el-row",[a("el-col",[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"工作组描述:"}},[a("span",[e._v(e._s(e.groupInfo.remark))])])],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"itemAuty"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-row",{attrs:{type:"flex",align:"middle"}},[a("el-col",{attrs:{span:6}},[a("div",{staticStyle:{"font-size":"16px"}},[e._v("当前工作组接口机信息")])]),e._v(" "),e.isAdmin||e.isTenant?a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.openAddFormDialog()}}},[e._v("分配接口机")])],1):e._e(),e._v(" "),e.isAdmin?a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.openCreateForm()}}},[e._v("新增接口机")])],1):e._e()],1)],1),e._v(" "),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.itfMachineLoading,expression:"itfMachineLoading"}],staticStyle:{width:"100%"},attrs:{data:e.itfMachineTable,size:"small"}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"interfaceMachineName",label:"接口机名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"interfaceMachineIp",label:"接口机IP",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"clusterName",label:"接口机归属集群",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"interfaceMachineUser",label:"接口机用户名",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"interfaceMachineDescription",label:"接口机描述",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"sshPort",label:"接口机ssh端口",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.itfTotal>0,expression:"itfTotal>0"}],attrs:{total:e.itfTotal,pageSizes:[5,10,15,20],page:e.itfQueryParams.pageNo,limit:e.itfQueryParams.pageSize},on:{"update:page":function(t){return e.$set(e.itfQueryParams,"pageNo",t)},"update:limit":function(t){return e.$set(e.itfQueryParams,"pageSize",t)},pagination:e.getItfMachineTableData}})],1)])],1),e._v(" "),e.dialogCreateFormVisible?a("el-dialog",{attrs:{title:"新增接口机",visible:e.dialogCreateFormVisible,width:"1000px","append-to-body":""},on:{"update:visible":function(t){e.dialogCreateFormVisible=t}}},[a("machine-add",{ref:"machineAdd",attrs:{Mark:e.mark},on:{"close-addMachine":e.closeCreateForm}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.closeCreateForm()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitCreateForm}},[e._v("确 定")])],1)],1):e._e(),e._v(" "),e.dialogAddFormVisible?a("el-dialog",{attrs:{title:"添加接口机",visible:e.dialogAddFormVisible,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.dialogAddFormVisible=t}}},[a("el-form",{attrs:{"label-width":"160px"}},[a("el-form-item",{attrs:{label:"接口机名称："}},[a("el-select",{staticStyle:{width:"240px"},attrs:{filterable:"",multiple:"",size:"mini",clearable:"",placeholder:"请选择接口机"},model:{value:e.machineValue,callback:function(t){e.machineValue=t},expression:"machineValue"}},e._l(e.machineList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.closeAddFormDialog()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitAddForm()}}},[e._v("确 定")])],1)],1):e._e()],1)},i=[],r=(a("ac6a"),a("6762"),a("2fdb"),a("c5f6"),a("ce45"),a("9835")),l=a("4360"),n=a("12a7"),o=a("ccbe"),c={props:{groupId:Number,groupInfo:{type:Object}},components:{"machine-add":n["default"]},data:function(){return{isAdmin:!1,isTenant:!1,itfMachineTable:[],itfTotal:10,itfMachineLoading:!1,itfQueryParams:{pageNo:1,pageSize:5,groupId:void 0},dialogCreateFormVisible:!1,mark:0,dialogAddFormVisible:!1,companyList:[],companyValue:"",machineList:[],machineValue:[]}},created:function(){var e=l["a"].getters.roles;e.includes("admin")&&(this.isAdmin=!0),e.includes("tenant")&&(this.isTenant=!0),console.log("this.groupId :",this.groupId),this.itfQueryParams.groupId=this.groupId,this.getItfMachineTableData()},methods:{getItfMachineTableData:function(){var e=this;this.itfMachineTable=[],this.itfMachineLoading=!0,Object(r["B"])(this.itfQueryParams).then((function(t){e.itfMachineTable=t.data.records,e.itfTotal=t.data.total,e.itfMachineLoading=!1}))},handleDelete:function(e){var t=this;console.log("to del 接口机",e);var a=e.interfaceMachineName,s={groupId:this.groupId,machineId:e.id};this.$confirm('是否确认从工作组中删除名为"'+a+'"的接口机?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["h"])(s).then((function(e){200==e.code?(t.msgSuccess("删除成功"),t.getItfMachineTableData()):t.msgError(e.msg)}))})).catch((function(e){}))},openCreateForm:function(){this.mark=0,this.dialogCreateFormVisible=!0},submitCreateForm:function(){this.$refs.machineAdd.submitCreateForm()},closeCreateForm:function(){this.dialogCreateFormVisible=!1},openAddFormDialog:function(){var e=this;this.dialogAddFormVisible=!0,Object(o["m"])({tenantId:this.groupInfo.tenantId}).then((function(t){e.machineList=t.data}))},companyChange:function(){var e=this;console.log("this.companyValue",this.companyValue);var t={clusterId:this.companyValue};this.machineList=[],this.machineValue="",Object(r["v"])(t).then((function(t){e.machineList=t.data}))},closeAddFormDialog:function(){this.dialogAddFormVisible=!1,this.companyList=[],this.machineList=[],this.companyValue="",this.machineValue=""},submitAddForm:function(){var e=this;console.log("queren",this.companyValue,this.machineValue);var t=[];this.machineValue.forEach((function(a){var s={groupId:e.groupId,machineId:a};t.push(s)})),console.log("addList :>> ",t),Object(r["d"])(t).then((function(t){200==t.code?(e.msgSuccess("新增接口机成功"),e.closeAddFormDialog(),e.getItfMachineTableData()):e.msgError(t.msg)}))}}},u=c,d=(a("6b5d"),a("2877")),h=Object(d["a"])(u,s,i,!1,null,"42cbc814",null);t["default"]=h.exports},"46bc":function(e,t,a){"use strict";var s=a("3684"),i=a.n(s);i.a},"4cf3":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"el-transfer-panel district-panel"},[a("div",{staticClass:"el-transfer-panel__header"},[a("el-checkbox",{attrs:{disabled:"",indeterminate:e.clusterIndeterminate},on:{change:e.clusterCheckAllChange},model:{value:e.clusterCheckAll,callback:function(t){e.clusterCheckAll=t},expression:"clusterCheckAll"}},[e._v("选择集群")]),e._v(" "),a("span",{staticClass:"check-number"},[e._v(e._s(e.clusterSelectedData.length)+"/"+e._s(e.clusterListMock.length))])],1),e._v(" "),a("div",{staticClass:"el-transfer-panel__body"},[a("div",{staticClass:"el-transfer-panel__filter el-input el-input--small el-input--prefix"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.clusterSearch,expression:"clusterSearch"}],staticClass:"el-input__inner",attrs:{type:"text",autocomplete:"off",placeholder:"请输入搜索内容"},domProps:{value:e.clusterSearch},on:{input:function(t){t.target.composing||(e.clusterSearch=t.target.value)}}}),e._v(" "),e._m(0)]),e._v(" "),e.clusterListMock.length>0?a("el-checkbox-group",{attrs:{max:1},on:{change:e.clusterCheckedChange},model:{value:e.clusterSelectedData,callback:function(t){e.clusterSelectedData=t},expression:"clusterSelectedData"}},e._l(e.clusterListMock,(function(t){return a("el-checkbox",{key:t.guid,staticClass:"el-transfer-panel__item",attrs:{label:t}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.clusterAlias))]),e._v(" "),a("span",[e._v(e._s(t.clusterAlias))])])],1)})),1):a("p",{staticClass:"no-data"},[e._v("无数据")])],1)]),e._v(" "),a("div",{staticClass:"el-transfer-panel district-panel"},[a("div",{staticClass:"el-transfer-panel__header"},[a("el-checkbox",{attrs:{disabled:"",indeterminate:e.baseIndeterminate},on:{change:e.baseCheckAllChange},model:{value:e.baseCheckAll,callback:function(t){e.baseCheckAll=t},expression:"baseCheckAll"}},[e._v("选择库")]),e._v(" "),a("span",{staticClass:"check-number"},[e._v(e._s(e.baseSelectedData.length)+"/"+e._s(e.baseListMock.length))])],1),e._v(" "),a("div",{staticClass:"el-transfer-panel__body"},[a("div",{staticClass:"el-transfer-panel__filter el-input el-input--small el-input--prefix"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.baseSearch,expression:"baseSearch"}],staticClass:"el-input__inner",attrs:{type:"text",autocomplete:"off",placeholder:"请输入搜索内容"},domProps:{value:e.baseSearch},on:{input:function(t){t.target.composing||(e.baseSearch=t.target.value)}}}),e._v(" "),e._m(1)]),e._v(" "),e.baseListMock.length>0?a("el-checkbox-group",{attrs:{max:1},on:{change:e.baseCheckedChange},model:{value:e.baseSelectedData,callback:function(t){e.baseSelectedData=t},expression:"baseSelectedData"}},e._l(e.baseListMock,(function(t){return a("el-checkbox",{key:t.guid,staticClass:"el-transfer-panel__item",attrs:{label:t}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.dataName))]),e._v(" "),a("span",[e._v(e._s(t.dataName))])])],1)})),1):a("p",{staticClass:"no-data"},[e._v("无数据")])],1)]),e._v(" "),a("div",{staticClass:"el-transfer-panel district-panel",staticStyle:{width:"300px"}},[a("div",{staticClass:"el-transfer-panel__header"},[a("el-checkbox",{attrs:{disabled:"",indeterminate:e.sheetIndeterminate},on:{change:e.sheetCheckAllChange},model:{value:e.sheetCheckAll,callback:function(t){e.sheetCheckAll=t},expression:"sheetCheckAll"}},[e._v("选择表")]),e._v(" "),a("span",{staticClass:"check-number"},[e._v(e._s(e.sheetSelectedData.length)+"/"+e._s(e.sheetListMock.length))])],1),e._v(" "),a("div",{staticClass:"el-transfer-panel__body"},[a("div",{staticClass:"el-transfer-panel__filter el-input el-input--small el-input--prefix"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.sheetSearch,expression:"sheetSearch"}],staticClass:"el-input__inner",attrs:{type:"text",autocomplete:"off",placeholder:"请输入搜索内容"},domProps:{value:e.sheetSearch},on:{input:function(t){t.target.composing||(e.sheetSearch=t.target.value)}}}),e._v(" "),e._m(2)]),e._v(" "),e.sheetListMock.length>0?a("el-checkbox-group",{attrs:{max:1},on:{change:e.sheetCheckedChange},model:{value:e.sheetSelectedData,callback:function(t){e.sheetSelectedData=t},expression:"sheetSelectedData"}},e._l(e.sheetListMock,(function(t){return a("el-checkbox",{key:t.guid,staticClass:"el-transfer-panel__item",attrs:{label:t}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.tableName))]),e._v(" "),a("span",[e._v(e._s(t.tableName))])])],1)})),1):a("p",{staticClass:"no-data"},[e._v("无数据")])],1)]),e._v(" "),a("div",{staticClass:"el-transfer-panel district-panel",staticStyle:{width:"300px"}},[a("div",{staticClass:"el-transfer-panel__header"},[a("el-checkbox",{attrs:{indeterminate:e.fieldIndeterminate},on:{change:e.fieldCheckAllChange},model:{value:e.fieldCheckAll,callback:function(t){e.fieldCheckAll=t},expression:"fieldCheckAll"}},[e._v("选择字段")]),e._v(" "),a("span",{staticClass:"check-number"},[e._v(e._s(e.fieldSelectedData.length)+"/"+e._s(e.fieldListMock.length))])],1),e._v(" "),a("div",{staticClass:"el-transfer-panel__body"},[a("div",{staticClass:"el-transfer-panel__filter el-input el-input--small el-input--prefix"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.fieldSearch,expression:"fieldSearch"}],staticClass:"el-input__inner",attrs:{type:"text",autocomplete:"off",placeholder:"请输入搜索内容"},domProps:{value:e.fieldSearch},on:{input:function(t){t.target.composing||(e.fieldSearch=t.target.value)}}}),e._v(" "),e._m(3)]),e._v(" "),e.fieldListMock.length>0?a("el-checkbox-group",{on:{change:e.fieldCheckedChange},model:{value:e.fieldSelectedData,callback:function(t){e.fieldSelectedData=t},expression:"fieldSelectedData"}},e._l(e.fieldListMock,(function(t){return a("el-checkbox",{key:t,staticClass:"el-transfer-panel__item",attrs:{label:t}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t))]),e._v(" "),a("span",[e._v(e._s(t))])])],1)})),1):a("p",{staticClass:"no-data"},[e._v("无数据")])],1)])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"el-input__prefix",staticStyle:{left:"0px"}},[a("i",{staticClass:"el-input__icon el-icon-search"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"el-input__prefix",staticStyle:{left:"0px"}},[a("i",{staticClass:"el-input__icon el-icon-search"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"el-input__prefix",staticStyle:{left:"0px"}},[a("i",{staticClass:"el-input__icon el-icon-search"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"el-input__prefix",staticStyle:{left:"0px"}},[a("i",{staticClass:"el-input__icon el-icon-search"})])}],r=(a("ac6a"),a("6762"),a("2fdb"),a("c5f6"),a("9835")),l=a("4360"),n={props:{groupID:{type:Number},selcObj:{type:String},selcType:{type:String},emailSelc:{type:Boolean}},data:function(){return{clusterCheckAll:!1,clusterIndeterminate:!1,clusterSearch:"",clusterOriginal:[],clusterDistrict:[],clusterListMock:[],clusterSelectedData:[],baseCheckAll:!1,baseIndeterminate:!1,baseSearch:"",baseOriginal:[],baseDistrict:[],baseListMock:[],baseSelectedData:[],sheetCheckAll:!1,sheetIndeterminate:!1,sheetSearch:"",sheetOriginal:[],sheetDistrict:[],sheetListMock:[],sheetSelectedData:[],fieldCheckAll:!1,fieldIndeterminate:!1,fieldSearch:"",fieldOriginal:[],fieldDistrict:[],fieldListMock:[],fieldSelectedData:[],firstSaveData:[]}},created:function(){console.log("接收组ID",this.groupID),console.log("接收对象",this.selcObj),console.log("接收类型",this.selcType),this.getData()},watch:{clusterSearch:function(e,t){this.clusterListMock=this.clusterDistrict,this.clusterListMock=this.clusterListMock.filter((function(t){return _.toLower(t.clusterAlias).includes(_.toLower(e))}))},baseSearch:function(e,t){this.baseListMock=this.baseDistrict,this.baseListMock=this.baseListMock.filter((function(t){return _.toLower(t.dataName).includes(_.toLower(e))}))},sheetSearch:function(e,t){this.sheetListMock=this.sheetDistrict,this.sheetListMock=this.sheetListMock.filter((function(t){return _.toLower(t.tableName).includes(_.toLower(e))}))},fieldSearch:function(e,t){this.fieldListMock=this.fieldDistrict,this.fieldListMock=this.fieldListMock.filter((function(t){return _.toLower(t).includes(_.toLower(e))}))},selcType:function(e,t){this.getData()}},methods:{getData:function(){var e=this;this.clusterOriginal=[],this.clusterListMock=[],this.clusterSelectedData=[],this.clusterIndeterminate=!1,this.clusterCheckAll=!1,this.baseListMock=[],this.baseSelectedData=[],this.baseIndeterminate=!1,this.baseCheckAll=!1,this.sheetListMock=[],this.sheetSelectedData=[],this.sheetIndeterminate=!1,this.sheetCheckAll=!1,this.fieldListMock=[],this.fieldSelectedData=[],this.fieldIndeterminate=!1,this.fieldCheckAll=!1;var t={groupId:this.groupID,privilegeScope:this.selcObj,action:this.selcType};Object(r["l"])(t).then((function(t){console.log(t),e.clusterOriginal=t.data,e.clusterListMock=t.data,e.clusterDistrict=e.clusterListMock}))},clusterCheckAllChange:function(e){console.log("字段全选"),this.clusterSelectedData=e?this.clusterListMock.map((function(e){return e})):[],this.clusterIndeterminate=!1},clusterCheckedChange:function(e){console.log("集群勾选",e);var t=e.length;this.clusterCheckAll=t===this.clusterListMock.length,this.clusterIndeterminate=t>0&&t<this.clusterListMock.length,0!=e.length?this.getBaseData(e[0].clusterName):(console.log("进来没"),this.fieldSelectedData=[],this.fieldIndeterminate=!1,this.fieldCheckAll=!1,console.log(this.fieldIndeterminate))},getBaseData:function(e){var t=this;this.baseOriginal=[],this.baseListMock=[],this.baseSelectedData=[],this.baseDistrict=[];var a={groupId:this.groupID,privilegeScope:this.selcObj,action:this.selcType,guid:e};Object(r["k"])(a).then((function(e){console.log(e),t.baseListMock=e.data,t.baseOriginal=e.data,t.baseDistrict=t.baseListMock}))},baseCheckAllChange:function(e){console.log("字段全选"),this.baseSelectedData=e?this.baseListMock.map((function(e){return e})):[],this.baseIndeterminate=!1},baseCheckedChange:function(e){console.log("库勾选",e);var t=e.length;this.baseCheckAll=t===this.baseListMock.length,this.baseIndeterminate=t>0&&t<this.baseListMock.length,0!=e.length?this.getSheetData(e[0].guid):(console.log("进来没"),this.sheetSelectedData=[],this.sheetIndeterminate=!1,this.sheetCheckAll=!1)},getSheetData:function(e){var t=this;this.sheetOriginal=[],this.sheetListMock=[],this.sheetSelectedData=[],this.sheetDistrict=[];var a={groupId:this.groupID,privilegeScope:this.selcObj,action:this.selcType,guid:e};Object(r["m"])(a).then((function(e){console.log(e),t.sheetOriginal=e.data,t.sheetListMock=e.data,t.sheetDistrict=t.sheetListMock}))},sheetCheckAllChange:function(e){console.log("表全选"),this.sheetSelectedData=e?this.sheetListMock.map((function(e){return e})):[],this.sheetIndeterminate=!1},sheetCheckedChange:function(e){console.log("表勾选",e);var t=e.length;this.sheetCheckAll=t===this.sheetListMock.length,this.sheetIndeterminate=t>0&&t<this.sheetListMock.length,0!=e.length?this.getfieldData(e[0].guid):(console.log("进来没"),this.fieldSelectedData=[],this.fieldIndeterminate=!1,this.fieldCheckAll=!1)},getfieldData:function(e){var t=this;this.fieldOriginal=[],this.fieldListMock=[],this.fieldSelectedData=[],this.firstSaveData=[],this.fieldDistrict=[];var a={groupId:this.groupID,privilegeScope:this.selcObj,action:this.selcType,guid:e};Object(r["x"])(a).then((function(e){console.log(e),t.fieldOriginal=e.data,e.data.forEach((function(e){t.fieldListMock.push(e.columnName),e.isCheck&&t.fieldSelectedData.push(e.columnName)})),t.fieldDistrict=t.fieldListMock,console.log("简化表列表",t.fieldListMock),console.log("简化勾选表列表",t.fieldSelectedData),t.firstSave()}))},fieldCheckAllChange:function(e){console.log("字段全选"),this.fieldSelectedData=e?this.fieldListMock.map((function(e){return e})):[],this.fieldIndeterminate=!1},fieldCheckedChange:function(e){console.log("字段勾选",e);var t=e.length;this.fieldCheckAll=t===this.fieldListMock.length,this.fieldIndeterminate=t>0&&t<this.fieldListMock.length},finishSelc:function(){var e=this,t=_.differenceWith(this.firstSaveData,this.fieldSelectedData,_.isEqual);console.log("delete老数组变化的数据",JSON.parse(JSON.stringify(t)));var a=_.differenceWith(this.fieldSelectedData,this.firstSaveData,_.isEqual);console.log("add新数组变化的数据",JSON.parse(JSON.stringify(a))),0!=t.length||0!=a.length?this.$confirm("检测到未保存的内容，是否在离开页面前保存修改？","警告",{distinguishCancelAndClose:!0,confirmButtonText:"保存",cancelButtonText:"放弃修改",type:"warning"}).then((function(){var s=[];if(0!==t.length)for(var i=0;i<t.length;i++){var n={};n.action=e.selcType,n.privilegeScope=e.selcObj;var o=e.clusterSelectedData[0].clusterName;n.serverName=o;var c=e.clusterOriginal.filter((function(e){return e.clusterName===o}));n.serverGuid=c[0].guid;var u=e.baseSelectedData[0].dataName;n.dbName=u;var d=e.baseOriginal.filter((function(e){return e.dataName===u}));n.dbGuid=d[0].guid;var h=e.sheetSelectedData[0].tableName;n.tableName=h;var m=e.sheetOriginal.filter((function(e){return e.tableName===h}));n.tableGuid=m[0].guid;var p=t[i];n.columnName=p;var f=e.fieldOriginal.filter((function(e){return e.columnName===p}));n.columnGuid=f[0].guid,n.dbPrivilegeId=f[0].dataPermissionId,n.optionStatus="delete",s.push(n)}if(0!==a.length)for(var g=0;g<a.length;g++){var b={};b.action=e.selcType,b.privilegeScope=e.selcObj;o=e.clusterSelectedData[0].clusterName;b.serverName=o;c=e.clusterOriginal.filter((function(e){return e.clusterName===o}));b.serverGuid=c[0].guid;u=e.baseSelectedData[0].dataName;b.dbName=u;d=e.baseOriginal.filter((function(e){return e.dataName===u}));b.dbGuid=d[0].guid;var v=e.sheetSelectedData[0].tableName;b.tableName=v;m=e.sheetOriginal.filter((function(e){return e.tableName===v}));b.tableGuid=m[0].guid;var _=a[g];b.columnName=_;var S=e.fieldOriginal.filter((function(e){return e.columnName===_}));b.columnGuid=S[0].guid,b.optionStatus="add",s.push(b)}var y={groupId:e.groupID,sysDataPermissionReqList:s};0==e.clusterSelectedData.length||0==e.baseSelectedData.length||0==e.sheetSelectedData.length||0==e.fieldSelectedData.length&&0==t.length||(console.log("提交",y),Object(r["D"])(y).then((function(t){console.log(t),200===t.code?(e.msgSuccess("保存成功"),l["a"].getters.roles.includes("admin")||e.emailSend(),e.$emit("save-close"),e.$store.commit("SET_FINISHLOADING",!1)):(e.msgError(t.msg),e.$store.commit("SET_FINISHLOADING",!1))})).catch((function(t){e.$store.commit("SET_FINISHLOADING",!1)})))})).catch((function(t){console.log("action",t),"cancel"===t?(e.$message({type:"info",message:"放弃修改并离开页面"}),e.$emit("save-close"),e.$store.commit("SET_FINISHLOADING",!1)):(e.$message({type:"info",message:"停留在当前页面"}),e.$store.commit("SET_FINISHLOADING",!1))})):this.$emit("save-close")},firstSave:function(){console.log("MOCK列表","集群",this.clusterListMock,"库",this.baseListMock,"表",this.sheetListMock,"字段",this.fieldListMock),console.log("已选列表",this.fieldSelectedData),this.firstSaveData=this.fieldSelectedData,console.log("刷新后就保存",this.firstSaveData)},savaSelc:function(){var e=this;console.log("MOCK列表"),console.log("已选上级列表",this.sheetSelectedData),console.log("库刷新后就保存",this.firstSaveData);var t=_.differenceWith(this.firstSaveData,this.fieldSelectedData,_.isEqual);console.log("delete老数组变化的数据",JSON.parse(JSON.stringify(t)));var a=_.differenceWith(this.fieldSelectedData,this.firstSaveData,_.isEqual);console.log("add新数组变化的数据",JSON.parse(JSON.stringify(a)));var s=[];if(0!==t.length)for(var i=0;i<t.length;i++){var n={};n.action=this.selcType,n.privilegeScope=this.selcObj;var o=this.clusterSelectedData[0].clusterName;n.serverName=o;var c=this.clusterOriginal.filter((function(e){return e.clusterName===o}));n.serverGuid=c[0].guid;var u=this.baseSelectedData[0].dataName;n.dbName=u;var d=this.baseOriginal.filter((function(e){return e.dataName===u}));n.dbGuid=d[0].guid;var h=this.sheetSelectedData[0].tableName;n.tableName=h;var m=this.sheetOriginal.filter((function(e){return e.tableName===h}));n.tableGuid=m[0].guid;var p=t[i];n.columnName=p;var f=this.fieldOriginal.filter((function(e){return e.columnName===p}));n.columnGuid=f[0].guid,n.dbPrivilegeId=f[0].dataPermissionId,n.optionStatus="delete",s.push(n)}if(0!==a.length)for(var g=0;g<a.length;g++){var b={};b.action=this.selcType,b.privilegeScope=this.selcObj;o=this.clusterSelectedData[0].clusterName;b.serverName=o;c=this.clusterOriginal.filter((function(e){return e.clusterName===o}));b.serverGuid=c[0].guid;u=this.baseSelectedData[0].dataName;b.dbName=u;d=this.baseOriginal.filter((function(e){return e.dataName===u}));b.dbGuid=d[0].guid;var v=this.sheetSelectedData[0].tableName;b.tableName=v;m=this.sheetOriginal.filter((function(e){return e.tableName===v}));b.tableGuid=m[0].guid;var S=a[g];b.columnName=S;var y=this.fieldOriginal.filter((function(e){return e.columnName===S}));b.columnGuid=y[0].guid,b.optionStatus="add",s.push(b)}var k={groupId:this.groupID,sysDataPermissionReqList:s};0==this.clusterSelectedData.length||0==this.baseSelectedData.length||0==this.sheetSelectedData.length||0==this.fieldSelectedData.length&&0==t.length?this.msgError("请按步骤进行勾选操作"):(console.log("提交",k),Object(r["D"])(k).then((function(t){console.log(t),200===t.code?(l["a"].getters.roles.includes("admin")?e.msgSuccess("授权成功，请使用！"):(e.msgSuccess("已提交，等待审批！"),e.emailSend()),e.getfieldData(e.sheetSelectedData[0].guid),e.finishMark&&e.msgSuccess("去保存"),e.$store.commit("SET_SUBMITLOADING",!1)):(e.msgError(t.msg),e.$store.commit("SET_SUBMITLOADING",!1))})).catch((function(t){e.$store.commit("SET_SUBMITLOADING",!1)})))},emailSend:function(){var e=this;if(console.log("发送邮件是否勾选",this.emailSelc),this.emailSelc){console.log("已选集群",this.clusterSelectedData[0].clusterName);var t=[];t.push(this.clusterSelectedData[0].clusterName),Object(r["C"])(t).then((function(t){console.log(t),200===t.code?e.msgSuccess(t.msg):e.msgError(t.msg)}))}else console.log("不发邮件")}}},o=n,c=(a("c9a5"),a("2877")),u=Object(c["a"])(o,s,i,!1,null,"13fefc3c",null);t["default"]=u.exports},6941:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"createForm",staticClass:"form_warp",attrs:{model:e.createForm,"label-width":"185px"}},[a("el-form-item",{staticClass:"form_warp_item",attrs:{label:"集群名称(中文)：",prop:"clusterName",rules:{required:!0,message:"集群名称(中文)不能为空",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"接口机名称",size:"small"},model:{value:e.createForm.clusterName,callback:function(t){e.$set(e.createForm,"clusterName",t)},expression:"createForm.clusterName"}})],1),e._v(" "),a("el-form-item",{staticClass:"form_warp_item",attrs:{label:"集群名称(英文)：",prop:"clusterAlias",rules:{required:!0,message:"集群名称(英文)不能为空",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"接口机名称",size:"small"},model:{value:e.createForm.clusterAlias,callback:function(t){e.$set(e.createForm,"clusterAlias",t)},expression:"createForm.clusterAlias"}})],1),e._v(" "),a("el-form-item",{staticClass:"form_warp_item",attrs:{label:"集群类型：",prop:"clusterType",rules:{required:!0,message:"集群类型不能为空",trigger:"change"}}},[a("el-select",{staticStyle:{width:"240px"},attrs:{filterable:"",placeholder:"请选择集群类型",size:"small"},on:{change:e.tabChange},model:{value:e.createForm.clusterType,callback:function(t){e.$set(e.createForm,"clusterType",t)},expression:"createForm.clusterType"}},e._l(e.clusterList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),e._v(" "),a("el-form-item",{staticClass:"form_warp_item",attrs:{label:"集群ip范围：",prop:"ipRange",rules:{required:!1,message:"集群ip范围",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"集群ip范围",size:"small"},model:{value:e.createForm.ipRange,callback:function(t){e.$set(e.createForm,"ipRange",t)},expression:"createForm.ipRange"}})],1),e._v(" "),a("el-form-item",{staticClass:"form_warp_item",attrs:{label:"集团负责人：",prop:"clusterPrincipal",rules:{required:!0,message:"集团负责人不能为空",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请填写集团负责人",size:"small"},model:{value:e.createForm.clusterPrincipal,callback:function(t){e.$set(e.createForm,"clusterPrincipal",t)},expression:"createForm.clusterPrincipal"}})],1),e._v(" "),a("el-form-item",{staticClass:"form_warp_item",attrs:{label:"集团负责人联系电话：",prop:"principalPhone",rules:{required:!0,message:"集团负责人联系电话不能为空",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请填写集团负责人联系电话",size:"small"},model:{value:e.createForm.principalPhone,callback:function(t){e.$set(e.createForm,"principalPhone",t)},expression:"createForm.principalPhone"}})],1),e._v(" "),a("el-form-item",{staticClass:"form_warp_item",attrs:{label:"集群版本号：",prop:"clusterVersion",rules:{required:!1,message:"集群版本号不能为空",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"请填写集群版本号",size:"small"},model:{value:e.createForm.clusterVersion,callback:function(t){e.$set(e.createForm,"clusterVersion",t)},expression:"createForm.clusterVersion"}})],1),e._v(" "),a("el-form-item",{staticClass:"form_warp_item",attrs:{label:"是否纳入统一账号管控：",prop:"isControl",rules:{required:!0,message:"请选择是否纳入统一账号管控",trigger:"change"}}},[a("el-select",{staticStyle:{width:"240px"},attrs:{placeholder:"是否纳入统一账号管控",size:"small"},on:{change:e.controlWithPermissionChange},model:{value:e.createForm.isControl,callback:function(t){e.$set(e.createForm,"isControl",t)},expression:"createForm.isControl"}},[a("el-option",{attrs:{label:"是",value:"1"}}),e._v(" "),a("el-option",{attrs:{label:"否",value:"0"}})],1)],1),e._v(" "),a("el-form-item",{staticClass:"form_warp_item",attrs:{label:"集群描述：",prop:"clusterDescription",rules:{required:!1,message:"集群描述",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"集群描述",size:"small"},model:{value:e.createForm.clusterDescription,callback:function(t){e.$set(e.createForm,"clusterDescription",t)},expression:"createForm.clusterDescription"}})],1),e._v(" "),a("el-form-item",{staticClass:"form_warp_item",attrs:{label:"集群隶属的业务系统/公司：",prop:"clusterBelong",rules:{required:!1,message:"集群隶属的业务系统/公司",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"集群隶属的业务系统/公司",size:"small"},model:{value:e.createForm.clusterBelong,callback:function(t){e.$set(e.createForm,"clusterBelong",t)},expression:"createForm.clusterBelong"}})],1),e._v(" "),a("el-form-item",{staticClass:"form_warp_item",attrs:{label:"集群交付账号：",prop:"deliveryAccount",rules:{required:!1,message:"集群交付账号",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"集群交付账号",size:"small"},model:{value:e.createForm.deliveryAccount,callback:function(t){e.$set(e.createForm,"deliveryAccount",t)},expression:"createForm.deliveryAccount"}})],1),e._v(" "),a("el-form-item",{staticClass:"form_warp_item",attrs:{label:"集群交付密码：",prop:"deliveryPassword",rules:{required:!1,message:"集群交付密码",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"240px"},attrs:{type:"password",placeholder:"集群交付密码",size:"small"},model:{value:e.createForm.deliveryPassword,callback:function(t){e.$set(e.createForm,"deliveryPassword",t)},expression:"createForm.deliveryPassword"}})],1),e._v(" "),a("el-form-item",{staticClass:"form_warp_item",attrs:{label:"集群运维负责人：",prop:"clusterOperation",rules:{required:!1,message:"集群运维负责人",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"集群运维负责人",size:"small"},model:{value:e.createForm.clusterOperation,callback:function(t){e.$set(e.createForm,"clusterOperation",t)},expression:"createForm.clusterOperation"}})],1),e._v(" "),a("el-form-item",{staticClass:"form_warp_item",attrs:{label:"集群运维负责人联系电话：",prop:"operationPhone",rules:{required:!1,message:"集群运维负责人联系电话",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"集群运维负责人联系电话",size:"small"},model:{value:e.createForm.operationPhone,callback:function(t){e.$set(e.createForm,"operationPhone",t)},expression:"createForm.operationPhone"}})],1),e._v(" "),a("el-form-item",{staticClass:"form_warp_item",attrs:{label:"集群机房位置：",prop:"roomLocation",rules:{required:!1,message:"集群机房位置",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"集群机房位置",size:"small"},model:{value:e.createForm.roomLocation,callback:function(t){e.$set(e.createForm,"roomLocation",t)},expression:"createForm.roomLocation"}})],1),e._v(" "),a("el-form-item",{staticClass:"form_warp_item",attrs:{label:"集群机房名称：",prop:"roomName",rules:{required:!1,message:"集群机房名称",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"集群机房名称",size:"small"},model:{value:e.createForm.roomName,callback:function(t){e.$set(e.createForm,"roomName",t)},expression:"createForm.roomName"}})],1),e._v(" "),e._l(e.createForm.parameters,(function(t,s){return a("el-form-item",{key:t.id,staticClass:"form_warp_item",attrs:{label:t.parameterName+"：",prop:"parameters."+s+".parameterValue",rules:{required:t.isRequest,message:"该项不能为空",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"240px"},attrs:{type:"密码"===t.parameterName?"password":"text",placeholder:t.parameterName,size:"small"},model:{value:t.parameterValue,callback:function(a){e.$set(t,"parameterValue",a)},expression:"domain.parameterValue"}})],1)})),e._v(" "),e.typeWithPermissionVisible?a("el-divider",{attrs:{"content-position":"center"}},[e._v("权限管控配置")]):e._e(),e._v(" "),e.typeWithPermissionVisible?a("el-form-item",{staticClass:"form_warp_item",attrs:{label:"权限类型：",prop:"clusterWithPermission",rules:{required:!1,message:"请选择集群权限归属",trigger:"change"}}},[a("el-select",{staticStyle:{width:"240px"},attrs:{clearable:"",placeholder:"集群权限归属",size:"small"},on:{change:e.permissionModuleChange},model:{value:e.createForm.clusterWithPermission,callback:function(t){e.$set(e.createForm,"clusterWithPermission",t)},expression:"createForm.clusterWithPermission"}},[a("el-option",{attrs:{label:"cdh",value:"cdh"}}),e._v(" "),a("el-option",{attrs:{label:"cdp",value:"cdp"}})],1)],1):e._e(),e._v(" "),e.PermissionModuleVisible?[a("el-form-item",{staticClass:"form_warp_item",attrs:{label:"权限组件url：",prop:"sysClusterPermission.url",rules:{required:!1,message:"权限组件url",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"权限组件url",size:"small"},model:{value:e.createForm.sysClusterPermission.url,callback:function(t){e.$set(e.createForm.sysClusterPermission,"url",t)},expression:"createForm.sysClusterPermission.url"}})],1),e._v(" "),"cdp"===e.createForm.clusterWithPermission?a("el-form-item",{staticClass:"form_warp_item",attrs:{label:"权限组件用户名：",prop:"sysClusterPermission.username",rules:{required:!1,message:"权限组件用户名",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"权限组件用户名",size:"small"},model:{value:e.createForm.sysClusterPermission.username,callback:function(t){e.$set(e.createForm.sysClusterPermission,"username",t)},expression:"createForm.sysClusterPermission.username"}})],1):e._e(),e._v(" "),"cdp"===e.createForm.clusterWithPermission?a("el-form-item",{staticClass:"form_warp_item",attrs:{label:"权限组件密码：",prop:"sysClusterPermission.password",rules:{required:!1,message:"权限组件密码",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"权限组件密码",size:"small"},model:{value:e.createForm.sysClusterPermission.password,callback:function(t){e.$set(e.createForm.sysClusterPermission,"password",t)},expression:"createForm.sysClusterPermission.password"}})],1):e._e()]:e._e(),e._v(" "),a("el-divider",{attrs:{"content-position":"center"}},[e._v("集群LDAP配置")]),e._v(" "),a("el-form-item",{staticClass:"form_warp_item",attrs:{label:"LDAP-URL：",prop:"sysClusterLdap.url",rules:{required:!1,message:"LDAP-URL",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"LDAP-URL",size:"small"},model:{value:e.createForm.sysClusterLdap.url,callback:function(t){e.$set(e.createForm.sysClusterLdap,"url",t)},expression:"createForm.sysClusterLdap.url"}})],1),e._v(" "),a("el-form-item",{staticClass:"form_warp_item",attrs:{label:"LDAP用户名：",prop:"sysClusterLdap.username",rules:{required:!1,message:"LDAP用户名",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"LDAP用户名",size:"small"},model:{value:e.createForm.sysClusterLdap.username,callback:function(t){e.$set(e.createForm.sysClusterLdap,"username",t)},expression:"createForm.sysClusterLdap.username"}})],1),e._v(" "),a("el-form-item",{staticClass:"form_warp_item",attrs:{label:"LDAP密码：",prop:"sysClusterLdap.password",rules:{required:!1,message:"LDAP密码",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"240px"},attrs:{type:"password",placeholder:"LDAP密码",size:"small"},model:{value:e.createForm.sysClusterLdap.password,callback:function(t){e.$set(e.createForm.sysClusterLdap,"password",t)},expression:"createForm.sysClusterLdap.password"}})],1),e._v(" "),a("el-form-item",{staticClass:"form_warp_item",attrs:{label:"LDAP-BaseDN：",prop:"sysClusterLdap.base",rules:{required:!1,message:"LDAP-BaseDN",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"LDAP-BaseDN",size:"small"},model:{value:e.createForm.sysClusterLdap.base,callback:function(t){e.$set(e.createForm.sysClusterLdap,"base",t)},expression:"createForm.sysClusterLdap.base"}})],1),e._v(" "),a("el-divider",{attrs:{"content-position":"center"}},[e._v("集群资源")]),e._v(" "),a("el-form-item",{staticClass:"form_warp_item",attrs:{label:"YARN的CPU总量：",prop:"clusterYarnCpu",rules:{required:!1,message:"YARN的CPU总量",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"240px"},attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'')",placeholder:"YARN的CPU总量",size:"small"},model:{value:e.createForm.clusterYarnCpu,callback:function(t){e.$set(e.createForm,"clusterYarnCpu",t)},expression:"createForm.clusterYarnCpu"}},[a("template",{slot:"append"},[e._v("核")])],2)],1),e._v(" "),a("el-form-item",{staticClass:"form_warp_item",attrs:{label:"YARN的内存总量：",prop:"clusterYarnMem",rules:{required:!1,message:"YARN的内存总量",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"240px"},attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'')",placeholder:"YARN的内存总量",size:"small"},model:{value:e.createForm.clusterYarnMem,callback:function(t){e.$set(e.createForm,"clusterYarnMem",t)},expression:"createForm.clusterYarnMem"}},[a("template",{slot:"append"},[e._v("GB")])],2)],1),e._v(" "),a("el-form-item",{staticClass:"form_warp_item",attrs:{label:"HDFS存储总量：",prop:"clusterHdfs",rules:{required:!1,message:"HDFS存储总量",trigger:"blur"}}},[a("el-input",{staticStyle:{width:"240px"},attrs:{onkeyup:"value=value.replace(/[^\\d]/g,'')",placeholder:"HDFS存储总量",size:"small"},model:{value:e.createForm.clusterHdfs,callback:function(t){e.$set(e.createForm,"clusterHdfs",t)},expression:"createForm.clusterHdfs"}},[a("template",{slot:"append"},[e._v("GB")])],2)],1)],2)],1)},i=[],r=(a("ac6a"),a("77e1")),l={data:function(){return{dialogCreateFormVisible:!1,clusterList:[],createForm:{clusterName:"",clusterAlias:"",clusterType:"",ipRange:"",clusterPrincipal:"",principalPhone:"",clusterVersion:"",isControl:"",clusterDescription:"",clusterBelong:"",deliveryAccount:"",deliveryPassword:"",clusterOperation:"",operationPhone:"",roomLocation:"",roomName:"",clusterWithPermission:"",sysClusterPermission:{url:"",username:"",password:""},sysClusterLdap:{url:"",base:"",username:"",password:""},clusterYarnCpu:"",clusterYarnMem:"",clusterHdfs:"",parameters:[]},typeWithPermissionVisible:!1,PermissionModuleVisible:!1}},created:function(){this.getClusterType()},methods:{getClusterType:function(){var e=this;Object(r["i"])().then((function(t){e.clusterList=t.data}))},tabChange:function(e){var t=this;this.createForm.parameters=[],console.log("tabItem :",e),Object(r["h"])({clusterType:e}).then((function(e){console.log("tabItem :"),e.data.forEach((function(e){e.parameterValue="",t.createForm.parameters.push(e)})),console.log("object :",t.createForm.parameters)}))},controlWithPermissionChange:function(e){console.log("value :>> ",e),1==e?this.typeWithPermissionVisible=!0:0==e&&(this.typeWithPermissionVisible=!1)},permissionModuleChange:function(e){console.log("value :>> ",e),this.PermissionModuleVisible=!!e},submitForm:function(){var e=this;this.$refs["createForm"].validate((function(t){if(!t)return console.log("error submit!!"),!1;console.log(e.createForm),Object(r["a"])(e.createForm).then((function(t){200==t.code?(e.msgSuccess("新增集群成功"),e.$emit("close-add")):e.msgError(t.msg)}))}))}}},n=l,o=(a("46bc"),a("2877")),c=Object(o["a"])(n,s,i,!1,null,"a5222f72",null);t["default"]=c.exports},"6b5d":function(e,t,a){"use strict";var s=a("d361"),i=a.n(s);i.a},"775d":function(e,t,a){},"77e1":function(e,t,a){"use strict";a.d(t,"k",(function(){return i})),a.d(t,"e",(function(){return r})),a.d(t,"c",(function(){return l})),a.d(t,"g",(function(){return n})),a.d(t,"i",(function(){return o})),a.d(t,"h",(function(){return c})),a.d(t,"a",(function(){return u})),a.d(t,"f",(function(){return d})),a.d(t,"l",(function(){return h})),a.d(t,"d",(function(){return m})),a.d(t,"j",(function(){return p})),a.d(t,"b",(function(){return f}));var s=a("b775");function i(e){return Object(s["a"])({url:"/metadata/collectClusterInformation/selectClusterByPage",method:"post",data:e})}function r(e){return Object(s["a"])({url:"/metadata/collectClusterInformation/insertClusterInformation",method:"post",data:e})}function l(e){return Object(s["a"])({url:"/metadata/collectClusterInformation/deleteClusterById",method:"post",data:e})}function n(e){return Object(s["a"])({url:"/metadata/sysClusterInfo/queryClusterInfoList",method:"post",data:e})}function o(){return Object(s["a"])({url:"/metadata/dictionary/queryDictionaryName",method:"post"})}function c(e){return Object(s["a"])({url:"/metadata/sysClusterParameterDic/queryClusterParameterByClusterType",method:"get",params:e})}function u(e){return Object(s["a"])({url:"/metadata/sysClusterInfo/addClusterInfo",method:"post",data:e})}function d(e){return Object(s["a"])({url:"/metadata/sysClusterInfo/queryClusterDetailInfoById",method:"get",params:e})}function h(e){return Object(s["a"])({url:"/metadata/sysClusterInfo/updateClusterInfo",method:"post",data:e})}function m(e){return Object(s["a"])({url:"/metadata/sysClusterInfo/deleteClusterInfo",method:"get",params:e})}function p(){return Object(s["a"])({url:"/metadata/sysClusterUser/querySysUserRole",method:"post"})}function f(e){return Object(s["a"])({url:"/metadata/sysClusterUser/assignClusterAdmin",method:"post",data:e})}},"7e905":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"el-transfer-panel district-panel"},[a("div",{staticClass:"el-transfer-panel__header"},[a("el-checkbox",{attrs:{disabled:"",indeterminate:e.clusterIndeterminate},on:{change:e.clusterCheckAllChange},model:{value:e.clusterCheckAll,callback:function(t){e.clusterCheckAll=t},expression:"clusterCheckAll"}},[e._v("选择集群")]),e._v(" "),a("span",{staticClass:"check-number"},[e._v(e._s(e.clusterSelectedData.length)+"/"+e._s(e.clusterListMock.length))])],1),e._v(" "),a("div",{staticClass:"el-transfer-panel__body"},[a("div",{staticClass:"el-transfer-panel__filter el-input el-input--small el-input--prefix"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.clusterSearch,expression:"clusterSearch"}],staticClass:"el-input__inner",attrs:{type:"text",autocomplete:"off",placeholder:"请输入搜索内容"},domProps:{value:e.clusterSearch},on:{input:function(t){t.target.composing||(e.clusterSearch=t.target.value)}}}),e._v(" "),e._m(0)]),e._v(" "),e.clusterListMock.length>0?a("el-checkbox-group",{attrs:{max:1},on:{change:e.clusterCheckedChange},model:{value:e.clusterSelectedData,callback:function(t){e.clusterSelectedData=t},expression:"clusterSelectedData"}},e._l(e.clusterListMock,(function(t){return a("el-checkbox",{key:t.guid,staticClass:"el-transfer-panel__item",attrs:{label:t}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.clusterAlias))]),e._v(" "),a("span",[e._v(e._s(t.clusterAlias))])])],1)})),1):a("p",{staticClass:"no-data"},[e._v("无数据")])],1)]),e._v(" "),a("div",{staticClass:"el-transfer-panel district-panel"},[a("div",{staticClass:"el-transfer-panel__header"},[a("el-checkbox",{attrs:{disabled:"",indeterminate:e.baseIndeterminate},on:{change:e.baseCheckAllChange},model:{value:e.baseCheckAll,callback:function(t){e.baseCheckAll=t},expression:"baseCheckAll"}},[e._v("选择库")]),e._v(" "),a("span",{staticClass:"check-number"},[e._v(e._s(e.baseSelectedData.length)+"/"+e._s(e.baseListMock.length))])],1),e._v(" "),a("div",{staticClass:"el-transfer-panel__body"},[a("div",{staticClass:"el-transfer-panel__filter el-input el-input--small el-input--prefix"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.baseSearch,expression:"baseSearch"}],staticClass:"el-input__inner",attrs:{type:"text",autocomplete:"off",placeholder:"请输入搜索内容"},domProps:{value:e.baseSearch},on:{input:function(t){t.target.composing||(e.baseSearch=t.target.value)}}}),e._v(" "),e._m(1)]),e._v(" "),e.baseListMock.length>0?a("el-checkbox-group",{attrs:{max:1},on:{change:e.baseCheckedChange},model:{value:e.baseSelectedData,callback:function(t){e.baseSelectedData=t},expression:"baseSelectedData"}},e._l(e.baseListMock,(function(t){return a("el-checkbox",{key:t.guid,staticClass:"el-transfer-panel__item",attrs:{label:t}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.dataName))]),e._v(" "),a("span",[e._v(e._s(t.dataName))])])],1)})),1):a("p",{staticClass:"no-data"},[e._v("无数据")])],1)]),e._v(" "),a("div",{staticClass:"el-transfer-panel district-panel",staticStyle:{width:"300px"}},[a("div",{staticClass:"el-transfer-panel__header"},[a("el-checkbox",{attrs:{indeterminate:e.sheetIndeterminate},on:{change:e.sheetCheckAllChange},model:{value:e.sheetCheckAll,callback:function(t){e.sheetCheckAll=t},expression:"sheetCheckAll"}},[e._v("选择表")]),e._v(" "),a("span",{staticClass:"check-number"},[e._v(e._s(e.sheetSelectedData.length)+"/"+e._s(e.sheetListMock.length))])],1),e._v(" "),a("div",{staticClass:"el-transfer-panel__body"},[a("div",{staticClass:"el-transfer-panel__filter el-input el-input--small el-input--prefix"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.sheetSearch,expression:"sheetSearch"}],staticClass:"el-input__inner",attrs:{type:"text",autocomplete:"off",placeholder:"请输入搜索内容"},domProps:{value:e.sheetSearch},on:{input:function(t){t.target.composing||(e.sheetSearch=t.target.value)}}}),e._v(" "),e._m(2)]),e._v(" "),e.sheetListMock.length>0?a("el-checkbox-group",{on:{change:e.sheetCheckedChange},model:{value:e.sheetSelectedData,callback:function(t){e.sheetSelectedData=t},expression:"sheetSelectedData"}},e._l(e.sheetListMock,(function(t){return a("el-checkbox",{key:t,staticClass:"el-transfer-panel__item",attrs:{label:t}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t))]),e._v(" "),a("span",[e._v(e._s(t))])])],1)})),1):a("p",{staticClass:"no-data"},[e._v("无数据")])],1)])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"el-input__prefix",staticStyle:{left:"0px"}},[a("i",{staticClass:"el-input__icon el-icon-search"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"el-input__prefix",staticStyle:{left:"0px"}},[a("i",{staticClass:"el-input__icon el-icon-search"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"el-input__prefix",staticStyle:{left:"0px"}},[a("i",{staticClass:"el-input__icon el-icon-search"})])}],r=(a("ac6a"),a("6762"),a("2fdb"),a("c5f6"),a("9835")),l=a("4360"),n={props:{groupID:{type:Number},selcObj:{type:String},selcType:{type:String},emailSelc:{type:Boolean}},data:function(){return{clusterCheckAll:!1,clusterIndeterminate:!1,clusterSearch:"",clusterOriginal:[],clusterDistrict:[],clusterListMock:[],clusterSelectedData:[],baseCheckAll:!1,baseIndeterminate:!1,baseSearch:"",baseOriginal:[],baseDistrict:[],baseListMock:[],baseSelectedData:[],sheetCheckAll:!1,sheetIndeterminate:!1,sheetSearch:"",sheetOriginal:[],sheetDistrict:[],sheetListMock:[],sheetSelectedData:[],firstSaveData:[]}},created:function(){console.log("接收组ID",this.groupID),console.log("接收对象",this.selcObj),console.log("接收类型",this.selcType),this.getData()},watch:{clusterSearch:function(e,t){this.clusterListMock=this.clusterDistrict,this.clusterListMock=this.clusterListMock.filter((function(t){return _.toLower(t.clusterAlias).includes(_.toLower(e))}))},baseSearch:function(e,t){this.baseListMock=this.baseDistrict,this.baseListMock=this.baseListMock.filter((function(t){return _.toLower(t.dataName).includes(_.toLower(e))}))},sheetSearch:function(e,t){this.sheetListMock=this.sheetDistrict,this.sheetListMock=this.sheetListMock.filter((function(t){return _.toLower(t).includes(_.toLower(e))}))},selcType:function(e,t){this.getData()}},methods:{getData:function(){var e=this;this.clusterOriginal=[],this.clusterListMock=[],this.clusterSelectedData=[],this.clusterIndeterminate=!1,this.clusterCheckAll=!1,this.baseListMock=[],this.baseSelectedData=[],this.baseIndeterminate=!1,this.baseCheckAll=!1,this.sheetListMock=[],this.sheetSelectedData=[],this.sheetIndeterminate=!1,this.sheetCheckAll=!1;var t={groupId:this.groupID,privilegeScope:this.selcObj,action:this.selcType};Object(r["l"])(t).then((function(t){console.log(t),e.clusterOriginal=t.data,e.clusterListMock=t.data,e.clusterDistrict=e.clusterListMock}))},clusterCheckAllChange:function(e){console.log("集群全选"),this.clusterSelectedData=e?this.clusterListMock.map((function(e){return e})):[],this.clusterIndeterminate=!1},clusterCheckedChange:function(e){console.log("集群勾选",e);var t=e.length;this.clusterCheckAll=t===this.clusterListMock.length,this.clusterIndeterminate=t>0&&t<this.clusterListMock.length,0!=e.length?this.getBaseData(e[0].clusterName):(console.log("进来没"),this.sheetSelectedData=[],this.sheetIndeterminate=!1,this.sheetCheckAll=!1,console.log(this.sheetIndeterminate))},getBaseData:function(e){var t=this;this.baseOriginal=[],this.baseListMock=[],this.baseSelectedData=[],this.baseDistrict=[];var a={groupId:this.groupID,privilegeScope:this.selcObj,action:this.selcType,guid:e};Object(r["k"])(a).then((function(e){console.log(e),t.baseListMock=e.data,t.baseOriginal=e.data,t.baseDistrict=t.baseListMock}))},baseCheckAllChange:function(e){console.log("库全选"),this.baseSelectedData=e?this.baseListMock.map((function(e){return e})):[],this.baseIndeterminate=!1},baseCheckedChange:function(e){console.log("库勾选",e);var t=e.length;this.baseCheckAll=t===this.baseListMock.length,this.baseIndeterminate=t>0&&t<this.baseListMock.length,0!=e.length?this.getSheetData(e[0].guid):(console.log("进来没"),this.sheetSelectedData=[],this.sheetIndeterminate=!1,this.sheetCheckAll=!1)},getSheetData:function(e){var t=this;this.sheetOriginal=[],this.sheetListMock=[],this.sheetSelectedData=[],this.firstSaveData=[],this.sheetDistrict=[];var a={groupId:this.groupID,privilegeScope:this.selcObj,action:this.selcType,guid:e};Object(r["m"])(a).then((function(e){console.log(e),t.sheetOriginal=e.data,e.data.forEach((function(e){t.sheetListMock.push(e.tableName),e.isCheck&&t.sheetSelectedData.push(e.tableName)})),t.sheetDistrict=t.sheetListMock,console.log("简化表列表",t.sheetListMock),console.log("简化勾选表列表",t.sheetSelectedData),t.firstSave()}))},sheetCheckAllChange:function(e){console.log("表全选"),this.sheetSelectedData=e?this.sheetListMock.map((function(e){return e})):[],this.sheetIndeterminate=!1},sheetCheckedChange:function(e){console.log("表勾选",e);var t=e.length;this.sheetCheckAll=t===this.sheetListMock.length,this.sheetIndeterminate=t>0&&t<this.sheetListMock.length},finishSelc:function(){var e=this,t=_.differenceWith(this.firstSaveData,this.sheetSelectedData,_.isEqual);console.log("delete老数组变化的数据",JSON.parse(JSON.stringify(t)));var a=_.differenceWith(this.sheetSelectedData,this.firstSaveData,_.isEqual);console.log("add新数组变化的数据",JSON.parse(JSON.stringify(a))),0!=t.length||0!=a.length?this.$confirm("检测到未保存的内容，是否在离开页面前保存修改？","警告",{distinguishCancelAndClose:!0,confirmButtonText:"保存",cancelButtonText:"放弃修改",type:"warning"}).then((function(){var s=[];if(0!==t.length)for(var i=0;i<t.length;i++){var n={};n.action=e.selcType,n.privilegeScope=e.selcObj;var o=e.clusterSelectedData[0].clusterName;n.serverName=o;var c=e.clusterOriginal.filter((function(e){return e.clusterName===o}));n.serverGuid=c[0].guid;var u=e.baseSelectedData[0].dataName;n.dbName=u;var d=e.baseOriginal.filter((function(e){return e.dataName===u}));n.dbGuid=d[0].guid;var h=t[i];n.tableName=h;var m=e.sheetOriginal.filter((function(e){return e.tableName===h}));n.tableGuid=m[0].guid,n.dbPrivilegeId=m[0].dataPermissionId,n.optionStatus="delete",s.push(n)}if(0!==a.length)for(var p=0;p<a.length;p++){var f={};f.action=e.selcType,f.privilegeScope=e.selcObj;o=e.clusterSelectedData[0].clusterName;f.serverName=o;c=e.clusterOriginal.filter((function(e){return e.clusterName===o}));f.serverGuid=c[0].guid;u=e.baseSelectedData[0].dataName;f.dbName=u;d=e.baseOriginal.filter((function(e){return e.dataName===u}));f.dbGuid=d[0].guid;var g=a[p];f.tableName=g;m=e.sheetOriginal.filter((function(e){return e.tableName===g}));f.tableGuid=m[0].guid,f.optionStatus="add",s.push(f)}var b={groupId:e.groupID,sysDataPermissionReqList:s};(0!=e.clusterSelectedData.length&&0!=e.baseSelectedData.length&&0!=e.sheetSelectedData.length||0!=t.length)&&(console.log("提交",b),Object(r["D"])(b).then((function(t){console.log(t),200===t.code?(e.msgSuccess("保存成功"),l["a"].getters.roles.includes("admin")||e.emailSend(),e.$emit("save-close"),e.$store.commit("SET_FINISHLOADING",!1)):(e.msgError(t.msg),e.$store.commit("SET_FINISHLOADING",!1))})).catch((function(t){e.$store.commit("SET_FINISHLOADING",!1)})))})).catch((function(t){console.log("action",t),"cancel"===t?(e.$message({type:"info",message:"放弃修改并离开页面"}),e.$emit("save-close")):e.$message({type:"info",message:"停留在当前页面"}),e.$store.commit("SET_FINISHLOADING",!1)})):(this.$emit("save-close"),this.$store.commit("SET_FINISHLOADING",!1))},firstSave:function(){console.log("MOCK列表","集群",this.clusterListMock,"库",this.baseListMock,"表",this.sheetListMock),console.log("已选列表",this.sheetSelectedData),this.firstSaveData=this.sheetSelectedData,console.log("刷新后就保存",this.firstSaveData)},savaSelc:function(){var e=this;console.log("MOCK列表"),console.log("已选上级列表",this.baseSelectedData),console.log("库刷新后就保存",this.firstSaveData);var t=_.differenceWith(this.firstSaveData,this.sheetSelectedData,_.isEqual);console.log("delete老数组变化的数据",JSON.parse(JSON.stringify(t)));var a=_.differenceWith(this.sheetSelectedData,this.firstSaveData,_.isEqual);console.log("add新数组变化的数据",JSON.parse(JSON.stringify(a)));var s=[];if(0!==t.length)for(var i=0;i<t.length;i++){var n={};n.action=this.selcType,n.privilegeScope=this.selcObj;var o=this.clusterSelectedData[0].clusterName;n.serverName=o;var c=this.clusterOriginal.filter((function(e){return e.clusterName===o}));n.serverGuid=c[0].guid;var u=this.baseSelectedData[0].dataName;n.dbName=u;var d=this.baseOriginal.filter((function(e){return e.dataName===u}));n.dbGuid=d[0].guid;var h=t[i];n.tableName=h;var m=this.sheetOriginal.filter((function(e){return e.tableName===h}));console.log("!!!!!!!!!!!!!!!!!!!!!!!",m),n.tableGuid=m[0].guid,n.dbPrivilegeId=m[0].dataPermissionId,n.optionStatus="delete",s.push(n)}if(0!==a.length)for(var p=0;p<a.length;p++){var f={};f.action=this.selcType,f.privilegeScope=this.selcObj;o=this.clusterSelectedData[0].clusterName;f.serverName=o;c=this.clusterOriginal.filter((function(e){return e.clusterName===o}));f.serverGuid=c[0].guid;u=this.baseSelectedData[0].dataName;f.dbName=u;d=this.baseOriginal.filter((function(e){return e.dataName===u}));f.dbGuid=d[0].guid;var g=a[p];f.tableName=g;m=this.sheetOriginal.filter((function(e){return e.tableName===g}));f.tableGuid=m[0].guid,f.optionStatus="add",s.push(f)}var b={groupId:this.groupID,sysDataPermissionReqList:s};0!=this.clusterSelectedData.length&&0!=this.baseSelectedData.length&&0!=this.sheetSelectedData.length||0!=t.length?(console.log("提交",b),Object(r["D"])(b).then((function(t){console.log(t),200===t.code?(l["a"].getters.roles.includes("admin")?e.msgSuccess("授权成功，请使用！"):(e.msgSuccess("已提交，等待审批！"),e.emailSend()),e.getSheetData(e.baseSelectedData[0].guid),e.$store.commit("SET_SUBMITLOADING",!1)):(e.msgError(t.msg),e.$store.commit("SET_SUBMITLOADING",!1))})).catch((function(t){e.$store.commit("SET_SUBMITLOADING",!1)}))):this.msgError("请按步骤进行勾选操作")},emailSend:function(){var e=this;if(console.log("发送邮件是否勾选",this.emailSelc),this.emailSelc){console.log("已选集群",this.clusterSelectedData[0].clusterName);var t=[];t.push(this.clusterSelectedData[0].clusterName),Object(r["C"])(t).then((function(t){console.log(t),200===t.code?e.msgSuccess(t.msg):e.msgError(t.msg)}))}else console.log("不发邮件")}}},o=n,c=(a("285d"),a("2877")),u=Object(c["a"])(o,s,i,!1,null,"3b7463be",null);t["default"]=u.exports},"7fdb":function(e,t,a){},8758:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"el-transfer-panel district-panel"},[a("div",{staticClass:"el-transfer-panel__header"},[a("el-checkbox",{attrs:{disabled:"",indeterminate:e.clusterIndeterminate},on:{change:e.clusterCheckAllChange},model:{value:e.clusterCheckAll,callback:function(t){e.clusterCheckAll=t},expression:"clusterCheckAll"}},[e._v("选择集群")]),e._v(" "),a("span",{staticClass:"check-number"},[e._v(e._s(e.clusterSelectedData.length)+"/"+e._s(e.clusterListMock.length))])],1),e._v(" "),a("div",{staticClass:"el-transfer-panel__body"},[a("div",{staticClass:"el-transfer-panel__filter el-input el-input--small el-input--prefix"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.clusterSearch,expression:"clusterSearch"}],staticClass:"el-input__inner",attrs:{type:"text",autocomplete:"off",placeholder:"请输入搜索内容"},domProps:{value:e.clusterSearch},on:{input:function(t){t.target.composing||(e.clusterSearch=t.target.value)}}}),e._v(" "),e._m(0)]),e._v(" "),e.clusterListMock.length>0?a("el-checkbox-group",{attrs:{max:1},on:{change:e.clusterCheckedChange},model:{value:e.clusterSelectedData,callback:function(t){e.clusterSelectedData=t},expression:"clusterSelectedData"}},e._l(e.clusterListMock,(function(t){return a("el-checkbox",{key:t.guid,staticClass:"el-transfer-panel__item",attrs:{label:t}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t.clusterAlias))]),e._v(" "),a("span",[e._v(e._s(t.clusterAlias))])])],1)})),1):a("p",{staticClass:"no-data"},[e._v("无数据")])],1)]),e._v(" "),a("div",{staticClass:"el-transfer-panel district-panel"},[a("div",{staticClass:"el-transfer-panel__header"},[a("el-checkbox",{attrs:{indeterminate:e.baseIndeterminate},on:{change:e.baseCheckAllChange},model:{value:e.baseCheckAll,callback:function(t){e.baseCheckAll=t},expression:"baseCheckAll"}},[e._v("选择库")]),e._v(" "),a("span",{staticClass:"check-number"},[e._v(e._s(e.baseSelectedData.length)+"/"+e._s(e.baseListMock.length))])],1),e._v(" "),a("div",{staticClass:"el-transfer-panel__body"},[a("div",{staticClass:"el-transfer-panel__filter el-input el-input--small el-input--prefix"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.baseSearch,expression:"baseSearch"}],staticClass:"el-input__inner",attrs:{type:"text",autocomplete:"off",placeholder:"请输入搜索内容"},domProps:{value:e.baseSearch},on:{input:function(t){t.target.composing||(e.baseSearch=t.target.value)}}}),e._v(" "),e._m(1)]),e._v(" "),e.baseListMock.length>0?a("el-checkbox-group",{on:{change:e.baseCheckedChange},model:{value:e.baseSelectedData,callback:function(t){e.baseSelectedData=t},expression:"baseSelectedData"}},e._l(e.baseListMock,(function(t){return a("el-checkbox",{key:t,staticClass:"el-transfer-panel__item",attrs:{label:t}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t))]),e._v(" "),a("span",[e._v(e._s(t))])])],1)})),1):a("p",{staticClass:"no-data"},[e._v("无数据")])],1)])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"el-input__prefix",staticStyle:{left:"0px"}},[a("i",{staticClass:"el-input__icon el-icon-search"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"el-input__prefix",staticStyle:{left:"0px"}},[a("i",{staticClass:"el-input__icon el-icon-search"})])}],r=(a("ac6a"),a("6762"),a("2fdb"),a("c5f6"),a("9835")),l=a("4360"),n={props:{groupID:{type:Number},selcObj:{type:String},selcType:{type:String},emailSelc:{type:Boolean}},data:function(){return{clusterCheckAll:!1,clusterIndeterminate:!1,clusterSearch:"",clusterOriginal:[],clusterDistrict:[],clusterListMock:[],clusterSelectedData:[],baseCheckAll:!1,baseIndeterminate:!1,baseSearch:"",baseOriginal:[],baseDistrict:[],baseListMock:[],baseSelectedData:[],firstSaveData:[]}},created:function(){console.log("接收组ID",this.groupID),console.log("接收对象",this.selcObj),console.log("接收类型",this.selcType),this.getData()},watch:{clusterSearch:function(e,t){this.clusterListMock=this.clusterDistrict,this.clusterListMock=this.clusterListMock.filter((function(t){return _.toLower(t.clusterAlias).includes(_.toLower(e))}))},baseSearch:function(e,t){this.baseListMock=this.baseDistrict,this.baseListMock=this.baseListMock.filter((function(t){return _.toLower(t).includes(_.toLower(e))}))},selcType:function(e,t){this.getData()}},methods:{getData:function(){var e=this;this.clusterOriginal=[],this.clusterListMock=[],this.clusterSelectedData=[],this.clusterIndeterminate=!1,this.clusterCheckAll=!1,this.baseListMock=[],this.baseSelectedData=[],this.baseIndeterminate=!1,this.baseCheckAll=!1;var t={groupId:this.groupID,privilegeScope:this.selcObj,action:this.selcType};Object(r["l"])(t).then((function(t){console.log(t),e.clusterOriginal=t.data,e.clusterListMock=t.data,e.clusterDistrict=e.clusterListMock}))},clusterCheckAllChange:function(e){console.log("集群全选"),this.clusterSelectedData=e?this.clusterListMock.map((function(e){return e})):[],this.clusterIndeterminate=!1},clusterCheckedChange:function(e){console.log("集群勾选",e);var t=e.length;this.clusterCheckAll=t===this.clusterListMock.length,this.clusterIndeterminate=t>0&&t<this.clusterListMock.length,0!=e.length?this.getBaseData(e[0].clusterName):(console.log("进来没"),this.baseSelectedData=[],this.baseIndeterminate=!1,this.baseCheckAll=!1,console.log(this.baseIndeterminate))},getBaseData:function(e){var t=this;this.baseOriginal=[],this.baseListMock=[],this.baseSelectedData=[],this.firstSaveData=[],this.baseDistrict=[];var a={groupId:this.groupID,privilegeScope:this.selcObj,action:this.selcType,guid:e};Object(r["k"])(a).then((function(e){console.log(e),t.baseOriginal=e.data,e.data.forEach((function(e){t.baseListMock.push(e.dataName),e.isCheck&&t.baseSelectedData.push(e.dataName)})),t.baseDistrict=t.baseListMock,console.log("简化表列表",t.baseListMock),console.log("简化勾选表列表",t.baseSelectedData),t.firstSave()}))},baseCheckAllChange:function(e){console.log("库全选"),this.baseSelectedData=e?this.baseListMock.map((function(e){return e})):[],this.baseIndeterminate=!1},baseCheckedChange:function(e){console.log("库勾选",e);var t=e.length;this.baseCheckAll=t===this.baseListMock.length,this.baseIndeterminate=t>0&&t<this.baseListMock.length},finishSelc:function(){var e=this,t=_.differenceWith(this.firstSaveData,this.baseSelectedData,_.isEqual);console.log("delete老数组变化的数据",JSON.parse(JSON.stringify(t)));var a=_.differenceWith(this.baseSelectedData,this.firstSaveData,_.isEqual);console.log("add新数组变化的数据",JSON.parse(JSON.stringify(a))),0!=t.length||0!=a.length?this.$confirm("检测到未保存的内容，是否在离开页面前保存修改？","警告",{distinguishCancelAndClose:!0,confirmButtonText:"保存",cancelButtonText:"放弃修改",type:"warning"}).then((function(){var s=[];if(0!==t.length)for(var i=0;i<t.length;i++){var n={};n.action=e.selcType,n.privilegeScope=e.selcObj;var o=e.clusterSelectedData[0].clusterName;n.serverName=o;var c=e.clusterOriginal.filter((function(e){return e.clusterName===o}));n.serverGuid=c[0].guid;var u=t[i];n.dbName=u;var d=e.baseOriginal.filter((function(e){return e.dataName===u}));n.dbGuid=d[0].guid,n.dbPrivilegeId=d[0].dataPermissionId,n.optionStatus="delete",s.push(n)}if(0!==a.length)for(var h=0;h<a.length;h++){var m={};m.action=e.selcType,m.privilegeScope=e.selcObj;o=e.clusterSelectedData[0].clusterName;m.serverName=o;c=e.clusterOriginal.filter((function(e){return e.clusterName===o}));m.serverGuid=c[0].guid;u=a[h];m.dbName=u;d=e.baseOriginal.filter((function(e){return e.dataName===u}));m.dbGuid=d[0].guid,m.optionStatus="add",s.push(m)}var p={groupId:e.groupID,sysDataPermissionReqList:s};(0!=e.clusterSelectedData.length&&0!=e.baseSelectedData.length||0!=t.length)&&(console.log("提交",p),Object(r["D"])(p).then((function(t){console.log(t),200===t.code?(e.msgSuccess("保存成功"),l["a"].getters.roles.includes("admin")||e.emailSend(),e.$emit("save-close"),e.$store.commit("SET_FINISHLOADING",!1)):(e.msgError(t.msg),e.$store.commit("SET_FINISHLOADING",!1))})).catch((function(t){e.$store.commit("SET_FINISHLOADING",!1)})))})).catch((function(t){console.log("action",t),"cancel"===t?(e.$message({type:"info",message:"放弃修改并离开页面"}),e.$emit("save-close")):e.$message({type:"info",message:"停留在当前页面"}),e.$store.commit("SET_FINISHLOADING",!1)})):(this.$emit("save-close"),this.$store.commit("SET_FINISHLOADING",!1))},firstSave:function(){console.log("MOCK列表","集群",this.clusterListMock,"库",this.baseListMock),console.log("已选列表",this.baseSelectedData),this.firstSaveData=this.baseSelectedData,console.log("刷新后就保存",this.firstSaveData)},savaSelc:function(){var e=this;console.log("MOCK列表"),console.log("已选上级列表",this.clusterSelectedData),console.log("库刷新后就保存",this.firstSaveData);var t=_.differenceWith(this.firstSaveData,this.baseSelectedData,_.isEqual);console.log("delete老数组变化的数据",JSON.parse(JSON.stringify(t)));var a=_.differenceWith(this.baseSelectedData,this.firstSaveData,_.isEqual);console.log("add新数组变化的数据",JSON.parse(JSON.stringify(a)));var s=[];if(0!==t.length)for(var i=0;i<t.length;i++){var n={};n.action=this.selcType,n.privilegeScope=this.selcObj;var o=this.clusterSelectedData[0].clusterName;n.serverName=o;var c=this.clusterOriginal.filter((function(e){return e.clusterName===o}));n.serverGuid=c[0].guid;var u=t[i];n.dbName=u;var d=this.baseOriginal.filter((function(e){return e.dataName===u}));n.dbGuid=d[0].guid,n.dbPrivilegeId=d[0].dataPermissionId,n.optionStatus="delete",s.push(n)}if(0!==a.length)for(var h=0;h<a.length;h++){var m={};m.action=this.selcType,m.privilegeScope=this.selcObj;o=this.clusterSelectedData[0].clusterName;m.serverName=o;c=this.clusterOriginal.filter((function(e){return e.clusterName===o}));m.serverGuid=c[0].guid;u=a[h];m.dbName=u;d=this.baseOriginal.filter((function(e){return e.dataName===u}));m.dbGuid=d[0].guid,m.optionStatus="add",s.push(m)}var p={groupId:this.groupID,sysDataPermissionReqList:s};0!=this.clusterSelectedData.length&&0!=this.baseSelectedData.length||0!=t.length?(console.log("提交",p),Object(r["D"])(p).then((function(t){console.log(t),200===t.code?(l["a"].getters.roles.includes("admin")?e.msgSuccess("授权成功，请使用！"):(e.msgSuccess("已提交，等待审批！"),e.emailSend()),e.getBaseData(e.clusterSelectedData[0].clusterName),e.$store.commit("SET_SUBMITLOADING",!1)):(e.msgError(t.msg),e.$store.commit("SET_SUBMITLOADING",!1))})).catch((function(t){e.$store.commit("SET_SUBMITLOADING",!1)}))):this.msgError("请按步骤进行勾选操作")},emailSend:function(){var e=this;if(console.log("发送邮件是否勾选",this.emailSelc),this.emailSelc){console.log("已选集群",this.clusterSelectedData[0].clusterName);var t=[];t.push(this.clusterSelectedData[0].clusterName),Object(r["C"])(t).then((function(t){console.log(t),200===t.code?e.msgSuccess(t.msg):e.msgError(t.msg)}))}else console.log("不发邮件")}}},o=n,c=(a("27b8"),a("2877")),u=Object(c["a"])(o,s,i,!1,null,"b38b2e30",null);t["default"]=u.exports},8861:function(e,t,a){"use strict";var s=a("245d"),i=a.n(s);i.a},"8da8":function(e,t,a){"use strict";var s=a("7fdb"),i=a.n(s);i.a},"8ec9":function(e,t,a){},9835:function(e,t,a){"use strict";a.d(t,"s",(function(){return i})),a.d(t,"t",(function(){return r})),a.d(t,"y",(function(){return l})),a.d(t,"b",(function(){return n})),a.d(t,"g",(function(){return o})),a.d(t,"n",(function(){return c})),a.d(t,"l",(function(){return u})),a.d(t,"k",(function(){return d})),a.d(t,"m",(function(){return h})),a.d(t,"x",(function(){return m})),a.d(t,"D",(function(){return p})),a.d(t,"A",(function(){return f})),a.d(t,"i",(function(){return g})),a.d(t,"c",(function(){return b})),a.d(t,"w",(function(){return v})),a.d(t,"o",(function(){return _})),a.d(t,"p",(function(){return S})),a.d(t,"e",(function(){return y})),a.d(t,"z",(function(){return k})),a.d(t,"B",(function(){return C})),a.d(t,"j",(function(){return D})),a.d(t,"v",(function(){return I})),a.d(t,"d",(function(){return L})),a.d(t,"h",(function(){return N})),a.d(t,"r",(function(){return F})),a.d(t,"q",(function(){return O})),a.d(t,"a",(function(){return M})),a.d(t,"f",(function(){return x})),a.d(t,"E",(function(){return w})),a.d(t,"C",(function(){return A})),a.d(t,"u",(function(){return T}));var s=a("b775");function i(e){return Object(s["a"])({url:"/permission/system/group/queryGroupByCondition",method:"post",data:e})}function r(e){return Object(s["a"])({url:"/permission/system/group/queryGroupDetailByGroupId",method:"get",params:e})}function l(e){return Object(s["a"])({url:"/permission/system/group/queryTenant",method:"post",data:e})}function n(e){return Object(s["a"])({url:"/permission/system/group/addGroup",method:"post",data:e})}function o(e){return Object(s["a"])({url:"/permission/system/group/deleteGroup/"+e,method:"delete"})}function c(e){return Object(s["a"])({url:"/permission/system/sysDictData/queryDataPerDictDataList",method:"post",data:e})}function u(e){return Object(s["a"])({url:"/permission/system/queryClusterList",method:"post",data:e})}function d(e){return Object(s["a"])({url:"/permission/system/queryClusterDataBases",method:"post",data:e})}function h(e){return Object(s["a"])({url:"/permission/system/queryDataBaseTables",method:"post",data:e})}function m(e){return Object(s["a"])({url:"/permission/system/queryTablesColumn",method:"post",data:e})}function p(e){return Object(s["a"])({url:"/permission/system/dataPermissionAudit/submitDataPermissionAudit",method:"post",data:e})}function f(e){return Object(s["a"])({url:"/permission/system/group/selectGroupUser",method:"post",data:e})}function g(e){return Object(s["a"])({url:"/permission/system/user/globalSearch",method:"post",data:e})}function b(e){return Object(s["a"])({url:"/permission/system/group/addGroupUser",method:"post",data:e})}function v(e){return Object(s["a"])({url:"/permission/system/querySysDataPermission",method:"post",data:e})}function _(e){return Object(s["a"])({url:"/permission/system/dataPermissionAudit/queryDataPermissionAudit",method:"post",data:e})}function S(e){return Object(s["a"])({url:"/permission/system/dataPermissionAudit/queryDataPermissionAuditDetail",method:"post",data:e})}function y(e){return Object(s["a"])({url:"/permission/system/dataPermissionAudit/auditDataPermission",method:"post",data:e})}function k(e){return Object(s["a"])({url:"/permission/system/dataPermissionAudit/revokeDataPermission",method:"post",data:e})}function C(e){return Object(s["a"])({url:"/permission/machineGroup/queryMachineListByGroupIds",method:"post",data:e})}function D(){return Object(s["a"])({url:"/metadata/sysClusterInfo/queryClusterBriefInfoList",method:"get"})}function I(e){return Object(s["a"])({url:"/metadata/sysInterfaceMachineInfo/queryMachineNameByClusterId",method:"get",params:e})}function L(e){return Object(s["a"])({url:"/permission/machineGroup/addMachineGroupBatch",method:"post",data:e})}function N(e){return Object(s["a"])({url:"/permission/machineGroup/deleteMachineGroup",method:"post",data:e})}function F(e){return Object(s["a"])({url:"/permission/ftpGroup/queryFtpRespListByGroupId",method:"post",data:e})}function O(e){return Object(s["a"])({url:"/permission/ftpGroup/queryFtpBriefInfoListByClusterId",method:"get",params:e})}function M(e){return Object(s["a"])({url:"/permission/ftpGroup/addFtpGroup",method:"post",data:e})}function x(e){return Object(s["a"])({url:"/permission/ftpGroup/deleteFtpGroup",method:"post",data:e})}function w(e){return Object(s["a"])({url:"/permission/system/group/updateWorkGroup",method:"post",data:e})}function A(e){return Object(s["a"])({url:"/permission/system/dataPermissionAudit/sendMailAboutDataPermissionAudit",method:"post",data:e})}function T(e){return Object(s["a"])({url:"/permission/system/sysTenant/queryMachineListByTenantId",method:"get",params:e})}},a339:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"detailMain"},[a("div",{staticClass:"itemInfo"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("工作组详情")])]),e._v(" "),a("el-form",{attrs:{"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"所属租户:"}},[a("span",[e._v(e._s(e.groupInfo?e.groupInfo.tenantUserName:e.groupInfoData.tenantUserName))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"工作组id:"}},[a("span",[e._v(e._s(e.groupInfo?e.groupInfo.groupName:e.groupInfoData.groupName))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"工作组名:"}},[a("span",[e._v(e._s(e.groupInfo?e.groupInfo.groupAlias:e.groupInfoData.groupAlias))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"创建时间:"}},[a("span",[e._v(e._s(e.groupInfo?e.groupInfo.createTime:e.groupInfoData.createTime))])])],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"工作组描述:"}},[a("span",[e._v(e._s(e.groupInfo?e.groupInfo.remark:e.groupInfoData.remark))])])],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"itemMeb"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("工作组成员")]),e._v(" "),e.isLinkTo?e._e():a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(t){e.menberVisible=!0}}},[e._v("编辑组员")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.menberList,height:"200",size:"mini"}},[a("el-table-column",{attrs:{prop:"nickName",label:"姓名",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"ID",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"角色",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.isAdmin?a("span",[e._v("管理员")]):e._e(),e._v(" "),1==t.row.isAdmin?a("span",[e._v("普通用户")]):e._e()]}}])})],1)],1)],1),e._v(" "),a("div",{staticClass:"itemAuty"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("工作组权限")]),e._v(" "),e.isLinkTo?e._e():a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(t){e.authorityVisible=!0}}},[e._v("编辑权限")])],1),e._v(" "),a("div",[a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,inline:!0}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"集群名称"}},[a("el-input",{attrs:{placeholder:"请输入集群名称",clearable:"",size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.serverName,callback:function(t){e.$set(e.queryParams,"serverName",t)},expression:"queryParams.serverName"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"库名称"}},[a("el-input",{attrs:{placeholder:"请输入库名称",clearable:"",size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.dbName,callback:function(t){e.$set(e.queryParams,"dbName",t)},expression:"queryParams.dbName"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"表名称"}},[a("el-input",{attrs:{placeholder:"请输入表名称",clearable:"",size:"mini"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleQuery(t)}},model:{value:e.queryParams.tableName,callback:function(t){e.$set(e.queryParams,"tableName",t)},expression:"queryParams.tableName"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"0",float:"right"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",size:"mini"},on:{click:e.handleQuery}},[e._v("搜索")])],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.gridLoading,expression:"gridLoading"}],staticStyle:{width:"100%"},attrs:{data:e.gridData,height:"300"}},[a("el-table-column",{attrs:{label:"库表信息",align:"center"}},[a("el-table-column",{attrs:{prop:"clusterName",label:"集群",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"库",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatVal")(t.row.dbName)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"表",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatVal")(t.row.tableName)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"字段",align:"center","show-overflow-tooltip":!0},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("formatVal")(t.row.columnName)))])]}}])})],1),e._v(" "),a("el-table-column",{attrs:{prop:"action",label:"权限",align:"center"}}),e._v(" "),e.isLinkTo?e._e():a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除\n                ")])]}}],null,!1,1787747490)})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.listTotal>0,expression:"listTotal>0"}],attrs:{total:e.listTotal,autoScroll:!1,pageSizes:[5,10],page:e.queryParams.pageNo,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNo",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})],1)])],1),e._v(" "),a("div",{staticClass:"itemMachine"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("工作组接口机")]),e._v(" "),e.isLinkTo?e._e():a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(t){e.machineVisible=!0}}},[e._v("编辑接口机")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.machineLoading,expression:"machineLoading"}],staticStyle:{width:"100%"},attrs:{data:e.machineData,size:"mini"}},[a("el-table-column",{attrs:{prop:"interfaceMachineName","show-overflow-tooltip":!0,label:"接口机名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"interfaceMachineIp","show-overflow-tooltip":!0,label:"IP",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"clusterName","show-overflow-tooltip":!0,label:"归属集群",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"interfaceMachineUser","show-overflow-tooltip":!0,label:"用户名",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"interfaceMachineDescription","show-overflow-tooltip":!0,label:"描述",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sshPort",label:"ssh端口","show-overflow-tooltip":!0,align:"center"}})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.itfTotal>0,expression:"itfTotal>0"}],attrs:{total:e.itfTotal,pageSizes:[5,10,15,20],page:e.itfQueryParams.pageNo,limit:e.itfQueryParams.pageSize},on:{"update:page":function(t){return e.$set(e.itfQueryParams,"pageNo",t)},"update:limit":function(t){return e.$set(e.itfQueryParams,"pageSize",t)},pagination:e.getItfMachineTableData}})],1)],1),e._v(" "),a("div",{staticClass:"itemFtp"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("工作组Ftp")]),e._v(" "),e.isLinkTo?e._e():a("el-button",{staticStyle:{float:"right",padding:"3px 0"},attrs:{type:"text"},on:{click:function(t){e.ftpVisible=!0}}},[e._v("编辑Ftp")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.ftpLoading,expression:"ftpLoading"}],staticStyle:{width:"100%"},attrs:{data:e.ftpData,size:"mini"}},[a("el-table-column",{attrs:{prop:"name","show-overflow-tooltip":!0,label:"Ftp名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"ip","show-overflow-tooltip":!0,label:"FtpIP",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"port","show-overflow-tooltip":!0,label:"Ftp端口",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"clusterName","show-overflow-tooltip":!0,label:"Ftp归属集群",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName","show-overflow-tooltip":!0,label:"Ftp用户名",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"protocol","show-overflow-tooltip":!0,label:"Ftp协议",align:"center"}})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.ftpTotal>0,expression:"ftpTotal>0"}],attrs:{total:e.ftpTotal,pageSizes:[5,10,15,20],page:e.ftpQueryParams.pageNo,limit:e.ftpQueryParams.pageSize},on:{"update:page":function(t){return e.$set(e.ftpQueryParams,"pageNo",t)},"update:limit":function(t){return e.$set(e.ftpQueryParams,"pageSize",t)},pagination:e.getFtpTableData}})],1)],1)]),e._v(" "),e.menberVisible?a("el-dialog",{attrs:{title:"编辑工作组成员",visible:e.menberVisible,width:"1100px","append-to-body":""},on:{"update:visible":function(t){e.menberVisible=t}}},[a("chooesMember",{ref:"chooesMember",attrs:{tenantID:e.disTenantId,groupID:e.groupId},on:{"close-member":e.menberClose,"refresh-list":e.getSelectedStaffList}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.finishMemberEdit}},[e._v("完 成")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.menberEdit}},[e._v("确 定")])],1)],1):e._e(),e._v(" "),e.authorityVisible?a("el-dialog",{attrs:{title:"编辑工作组权限",visible:e.authorityVisible,width:"920px","append-to-body":"","close-on-click-modal":!1},on:{"update:visible":function(t){e.authorityVisible=t}}},[a("editAuthority",{ref:"editAuthority",staticStyle:{"min-height":"450px"},attrs:{groupId:e.groupId,emailCheck:e.emailChecked},on:{"close-authority":e.authorityClose}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.isAdmin?e._e():a("el-checkbox",{staticStyle:{"margin-right":"20px"},model:{value:e.emailChecked,callback:function(t){e.emailChecked=t},expression:"emailChecked"}},[e._v("邮件通知审批人")]),e._v(" "),a("el-button",{attrs:{loading:this.$store.state.workGroup.finishLoading},on:{click:e.finishAuthority}},[e._v("完 成")]),e._v(" "),e.isAdmin?e._e():a("el-button",{attrs:{loading:this.$store.state.workGroup.submitLoading,type:"primary"},on:{click:e.submitAuthority}},[e._v("提交审批")]),e._v(" "),e.isAdmin?a("el-button",{attrs:{loading:this.$store.state.workGroup.submitLoading,type:"primary"},on:{click:e.submitAuthority}},[e._v("保 存")]):e._e()],1)],1):e._e(),e._v(" "),e.machineVisible?a("el-dialog",{attrs:{title:"接口机编辑",visible:e.machineVisible,width:"1200px",top:"15px","append-to-body":""},on:{"update:visible":function(t){e.machineVisible=t}}},[a("itfMachine",{ref:"editItfMachine",attrs:{groupId:e.groupId,groupInfo:e.groupInfo}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.finishItfEdit}},[e._v("完 成")])],1)],1):e._e(),e._v(" "),e.ftpVisible?a("el-dialog",{attrs:{title:"Ftp编辑",visible:e.ftpVisible,width:"1200px",top:"15px","append-to-body":""},on:{"update:visible":function(t){e.ftpVisible=t}}},[a("empowerFtp",{ref:"empowerFtp",attrs:{groupId:e.groupId,groupInfo:e.groupInfo}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.finishFtpEdit}},[e._v("完 成")])],1)],1):e._e()],1)},i=[],r=(a("6762"),a("2fdb"),a("9835")),l=a("adde"),n=a("1934"),o=a("457f"),c=a("abfe"),u=a("4360"),d={name:"工作组详情",props:{groupInfo:{type:Object}},filters:{formatVal:function(e){return""===e?"全部":e}},components:{chooesMember:l["default"],editAuthority:n["default"],itfMachine:o["default"],empowerFtp:c["default"]},watch:{groupInfo:function(e,t){void 0===e&&(this.groupInfoData=t)}},created:function(){var e=this;if(void 0===this.groupInfo){this.isLinkTo=!0;var t=this.$route.params;console.log("routeToGroupId :",t),this.groupId=t.groupId,Object(r["t"])(t).then((function(t){console.log(t),e.groupInfo=t.data,e.groupInfoData=t.data,e.disTenantId=e.groupInfo.tenantId}))}else this.groupId=this.groupInfo.groupId,this.disTenantId=this.groupInfo.tenantId;var a=u["a"].getters.roles;console.log("登陆角色",a),a.includes("admin")&&(console.log("包含"),this.isAdmin=!0),this.getSelectedStaffList(),this.getList(),this.getItfMachineTableData(),this.getFtpTableData()},data:function(){return{groupInfoData:{},isLinkTo:!1,isAdmin:!1,menberVisible:!1,authorityVisible:!1,groupId:void 0,menberList:[],disTenantId:void 0,emailChecked:!0,gridLoading:!1,queryParams:{pageNo:1,pageSize:5,groupId:void 0,serverName:void 0,dbName:void 0,tableName:void 0,columnName:void 0},listTotal:0,gridData:[],machineData:[],machineLoading:!1,itfTotal:0,itfQueryParams:{pageNo:1,pageSize:5,groupId:void 0},machineVisible:!1,ftpData:[],ftpLoading:!1,ftpTotal:0,ftpQueryParams:{pageNo:1,pageSize:5,groupId:void 0},ftpVisible:!1}},methods:{getSelectedStaffList:function(){var e=this,t=new FormData;t.append("groupId",this.groupId),Object(r["A"])(t).then((function(t){console.log(t),e.menberList=t.data}))},menberEdit:function(){this.$refs.chooesMember.modifyStaff()},finishMemberEdit:function(){this.$refs.chooesMember.finishMem()},menberClose:function(){this.menberVisible=!1},getList:function(){var e=this;console.log("生成表格"),this.gridLoading=!0,this.queryParams.groupId=this.groupId,Object(r["w"])(this.queryParams).then((function(t){e.gridData=t.data.records,e.listTotal=t.data.total,e.gridLoading=!1,console.log(t)}))},handleQuery:function(){this.queryParams.pageNo=1,console.log("搜索条件",this.queryParams),this.getList()},submitAuthority:function(){this.$store.commit("SET_SUBMITLOADING",!0),this.$refs.editAuthority.submitSelect()},finishAuthority:function(){this.$store.commit("SET_FINISHLOADING",!0),this.$refs.editAuthority.finishSelect()},authorityClose:function(){this.authorityVisible=!1,this.getList()},handleDelete:function(e){var t=this;console.log("删除 :",e);var a={optionStatus:"delete"};a.dbPrivilegeId=e.dbPrivilegeId,a.action=e.action,a.privilegeScope=e.privilegeScope,""!=e.serverName&&(a.serverName=e.serverName,a.serverGuid=e.serverGuid,""!=e.dbName&&(a.dbName=e.dbName,a.dbGuid=e.dbGuid,""!=e.tableName&&(a.tableName=e.tableName,a.tableGuid=e.tableGuid,""!=e.columnName&&(a.columnName=e.columnName,a.columnGuid=e.columnGuid)))),console.log("删除对象 :",a);var s=[];s.push(a),this.$confirm("是否确认删除?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e={groupId:t.groupId,sysDataPermissionReqList:s};Object(r["D"])(e).then((function(e){200===e.code?(t.msgSuccess("删除成功"),t.getList()):t.msgError(e.msg)}))})).catch((function(e){}))},getItfMachineTableData:function(){var e=this;this.machineData=[],this.machineLoading=!0,this.itfQueryParams.groupId=this.groupId,Object(r["B"])(this.itfQueryParams).then((function(t){e.machineData=t.data.records,e.itfTotal=t.data.total,e.machineLoading=!1}))},finishItfEdit:function(){this.machineVisible=!1,this.getItfMachineTableData()},getFtpTableData:function(){var e=this;this.ftpData=[],this.ftpLoading=!0,this.ftpQueryParams.groupId=this.groupId,Object(r["r"])(this.ftpQueryParams).then((function(t){e.ftpData=t.data.records,e.ftpTotal=t.data.total,e.ftpLoading=!1}))},finishFtpEdit:function(){this.ftpVisible=!1,this.getFtpTableData()}}},h=d,m=(a("8861"),a("2877")),p=Object(m["a"])(h,s,i,!1,null,"626fd6d0",null);t["default"]=p.exports},a855:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"el-transfer-panel district-panel"},[a("div",{staticClass:"el-transfer-panel__header"},[a("el-checkbox",{attrs:{indeterminate:e.clusterIndeterminate},on:{change:e.clusterCheckAllChange},model:{value:e.clusterCheckAll,callback:function(t){e.clusterCheckAll=t},expression:"clusterCheckAll"}},[e._v("选择集群")]),e._v(" "),a("span",{staticClass:"check-number"},[e._v(e._s(e.clusterSelectedData.length)+"/"+e._s(e.clusterListMock.length))])],1),e._v(" "),a("div",{staticClass:"el-transfer-panel__body"},[a("div",{staticClass:"el-transfer-panel__filter el-input el-input--small el-input--prefix"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.clusterSearch,expression:"clusterSearch"}],staticClass:"el-input__inner",attrs:{type:"text",autocomplete:"off",placeholder:"请输入搜索内容"},domProps:{value:e.clusterSearch},on:{input:function(t){t.target.composing||(e.clusterSearch=t.target.value)}}}),e._v(" "),e._m(0)]),e._v(" "),e.clusterListMock.length>0?a("el-checkbox-group",{on:{change:e.clusterCheckedChange},model:{value:e.clusterSelectedData,callback:function(t){e.clusterSelectedData=t},expression:"clusterSelectedData"}},e._l(e.clusterListMock,(function(t){return a("el-checkbox",{key:t,staticClass:"el-transfer-panel__item",attrs:{label:t}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",placement:"right"}},[a("div",{attrs:{slot:"content"},slot:"content"},[e._v(e._s(t))]),e._v(" "),a("span",[e._v(e._s(t))])])],1)})),1):a("p",{staticClass:"no-data"},[e._v("无数据")])],1)])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{staticClass:"el-input__prefix",staticStyle:{left:"0px"}},[a("i",{staticClass:"el-input__icon el-icon-search"})])}],r=(a("ac6a"),a("6762"),a("2fdb"),a("c5f6"),a("9835")),l=a("4360"),n=a("2ef0"),o={props:{groupID:{type:Number},selcObj:{type:String},selcType:{type:String},emailSelc:{type:Boolean}},data:function(){return{clusterCheckAll:!1,clusterIndeterminate:!1,clusterSearch:"",clusterOriginal:[],clusterDistrict:[],clusterListMock:[],clusterSelectedData:[],firstSaveData:[]}},created:function(){console.log("接收组ID",this.groupID),console.log("接收对象",this.selcObj),console.log("接收类型",this.selcType),this.getData()},watch:{clusterSearch:function(e,t){this.clusterListMock=this.clusterDistrict,this.clusterListMock=this.clusterListMock.filter((function(t){return n.toLower(t).includes(n.toLower(e))}))},selcType:function(e,t){this.getData()}},methods:{getData:function(){var e=this;this.clusterOriginal=[],this.clusterListMock=[],this.clusterSelectedData=[],this.firstSaveData=[],this.clusterDistrict=[],this.clusterIndeterminate=!1,this.clusterCheckAll=!1;var t={groupId:this.groupID,privilegeScope:this.selcObj,action:this.selcType};Object(r["l"])(t).then((function(t){console.log(t),e.clusterOriginal=t.data,t.data.forEach((function(t){e.clusterListMock.push(t.clusterAlias),t.isCheck&&e.clusterSelectedData.push(t.clusterAlias)})),e.clusterDistrict=e.clusterListMock,console.log("简化表列表",e.clusterListMock),console.log("简化勾选表列表",e.clusterSelectedData),e.firstSave()}))},clusterCheckAllChange:function(e){console.log("集群全选"),this.clusterSelectedData=e?this.clusterListMock.map((function(e){return e})):[],this.clusterIndeterminate=!1},clusterCheckedChange:function(e){console.log("集群勾选",e);var t=e.length;this.clusterCheckAll=t===this.clusterListMock.length,this.clusterIndeterminate=t>0&&t<this.clusterListMock.length},firstSave:function(){console.log("MOCK列表",this.clusterListMock),console.log("已选列表",this.clusterSelectedData),this.firstSaveData=this.clusterSelectedData,console.log("刷新后就保存",this.firstSaveData)},finishSelc:function(){var e=this,t=n.differenceWith(this.firstSaveData,this.clusterSelectedData,n.isEqual);console.log("delete老数组变化的数据",JSON.parse(JSON.stringify(t)));var a=n.differenceWith(this.clusterSelectedData,this.firstSaveData,n.isEqual);console.log("add新数组变化的数据",JSON.parse(JSON.stringify(a))),0!=t.length||0!=a.length?this.$confirm("检测到未保存的内容，是否在离开页面前保存修改？","警告",{distinguishCancelAndClose:!0,confirmButtonText:"保存",cancelButtonText:"放弃修改",type:"warning"}).then((function(){var s=[];if(0!==t.length)for(var i=0;i<t.length;i++){var n={};n.action=e.selcType,n.privilegeScope=e.selcObj;var o=t[i],c=e.clusterOriginal.filter((function(e){return e.clusterAlias===o}));n.serverGuid=c[0].guid,n.serverName=c[0].clusterName,n.dbPrivilegeId=c[0].dataPermissionId,n.optionStatus="delete",s.push(n)}if(0!==a.length)for(var u=0;u<a.length;u++){var d={};d.action=e.selcType,d.privilegeScope=e.selcObj;o=a[u],c=e.clusterOriginal.filter((function(e){return e.clusterAlias===o}));d.serverGuid=c[0].guid,d.serverName=c[0].clusterName,d.optionStatus="add",s.push(d)}var h={groupId:e.groupID,sysDataPermissionReqList:s};0==e.clusterSelectedData.length&&0==t.length||(console.log("提交",h),Object(r["D"])(h).then((function(t){console.log(t),200===t.code?(e.msgSuccess("保存成功"),l["a"].getters.roles.includes("admin")||e.emailSend(),e.$emit("save-close"),e.$store.commit("SET_FINISHLOADING",!1)):(e.msgError(t.msg),e.$store.commit("SET_FINISHLOADING",!1))})).catch((function(t){e.$store.commit("SET_FINISHLOADING",!1)})))})).catch((function(t){console.log("action",t),"cancel"===t?(e.$message({type:"info",message:"放弃修改并离开页面"}),e.$emit("save-close")):e.$message({type:"info",message:"停留在当前页面"}),e.$store.commit("SET_FINISHLOADING",!1)})):(this.$emit("save-close"),this.$store.commit("SET_FINISHLOADING",!1))},savaSelc:function(){var e=this;console.log("MOCK列表",this.clusterListMock),console.log("已选列表",this.clusterSelectedData),console.log("刷新后就保存",this.firstSaveData);var t=n.differenceWith(this.firstSaveData,this.clusterSelectedData,n.isEqual);console.log("delete老数组变化的数据",JSON.parse(JSON.stringify(t)));var a=n.differenceWith(this.clusterSelectedData,this.firstSaveData,n.isEqual);console.log("add新数组变化的数据",JSON.parse(JSON.stringify(a)));var s=[];if(0!==t.length)for(var i=0;i<t.length;i++){var o={};o.action=this.selcType,o.privilegeScope=this.selcObj;var c=t[i],u=this.clusterOriginal.filter((function(e){return e.clusterAlias===c}));o.serverGuid=u[0].guid,o.serverName=u[0].clusterName,o.dbPrivilegeId=u[0].dataPermissionId,o.optionStatus="delete",s.push(o)}if(0!==a.length)for(var d=0;d<a.length;d++){var h={};h.action=this.selcType,h.privilegeScope=this.selcObj;c=a[d],u=this.clusterOriginal.filter((function(e){return e.clusterAlias===c}));h.serverGuid=u[0].guid,h.serverName=u[0].clusterName,h.optionStatus="add",s.push(h)}var m={groupId:this.groupID,sysDataPermissionReqList:s};0!=this.clusterSelectedData.length||0!=t.length?(console.log("提交",m),Object(r["D"])(m).then((function(t){console.log(t),200===t.code?(l["a"].getters.roles.includes("admin")?e.msgSuccess("授权成功，请使用！"):(e.msgSuccess("已提交，等待审批！"),e.emailSend()),e.getData(),e.$store.commit("SET_SUBMITLOADING",!1)):(e.msgError(t.msg),e.$store.commit("SET_SUBMITLOADING",!1))})).catch((function(t){e.$store.commit("SET_SUBMITLOADING",!1)}))):this.msgError("请按步骤进行勾选操作")},emailSend:function(){var e=this;if(console.log("发送邮件是否勾选",this.emailSelc),this.emailSelc){var t=this.clusterSelectedData[0],a=this.clusterOriginal.filter((function(e){return e.clusterAlias===t}));console.log("已选集群",a[0].clusterName);var s=[];s.push(a[0].clusterName),Object(r["C"])(s).then((function(t){console.log(t),200===t.code?e.msgSuccess(t.msg):e.msgError(t.msg)}))}else console.log("不发邮件")}}},c=o,u=(a("b495"),a("2877")),d=Object(u["a"])(c,s,i,!1,null,"c8d3e32a",null);t["default"]=d.exports},abfe:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"itemInfo"},[a("el-card",{staticClass:"box-card"},[a("el-form",{attrs:{"label-width":"120px","label-position":"left"}},[a("el-row",[a("el-col",[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"当前工作组名称:"}},[a("span",[e._v(e._s(e.groupInfo.groupName))])])],1)],1),e._v(" "),a("el-row",[a("el-col",[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"工作组描述:"}},[a("span",[e._v(e._s(e.groupInfo.remark))])])],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"itemAuty"},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("el-row",{attrs:{type:"flex",align:"middle"}},[a("el-col",{attrs:{span:6}},[a("div",{staticStyle:{"font-size":"16px"}},[e._v("当前工作组Ftp信息")])]),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.openAddFormDialog()}}},[e._v("添加Ftp")])],1),e._v(" "),a("el-col",{attrs:{span:3}},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.openCreateForm()}}},[e._v("新增Ftp")])],1)],1)],1),e._v(" "),a("div",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.ftpLoading,expression:"ftpLoading"}],staticStyle:{width:"100%"},attrs:{data:e.ftpTable,size:"small"}},[a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"name",label:"Ftp名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"ip",label:"IP",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"port",label:"端口",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"clusterName",label:"归属集群",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"userName",label:"Ftp用户名",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"protocol",label:"Ftp协议",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{"show-overflow-tooltip":!0,label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.ftpTotal>0,expression:"ftpTotal>0"}],attrs:{total:e.ftpTotal,pageSizes:[5,10,15,20],page:e.ftpQueryParams.pageNo,limit:e.ftpQueryParams.pageSize},on:{"update:page":function(t){return e.$set(e.ftpQueryParams,"pageNo",t)},"update:limit":function(t){return e.$set(e.ftpQueryParams,"pageSize",t)},pagination:e.getFtpTableData}})],1)])],1),e._v(" "),e.dialogCreateFormVisible?a("el-dialog",{attrs:{title:"新增Ftp",visible:e.dialogCreateFormVisible,width:"1000px","append-to-body":""},on:{"update:visible":function(t){e.dialogCreateFormVisible=t}}},[a("ftp-add",{ref:"ftpAdd",attrs:{Mark:e.mark},on:{"close-addFtp":e.closeCreateForm}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.closeCreateForm()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitCreateForm}},[e._v("确 定")])],1)],1):e._e(),e._v(" "),e.dialogAddFormVisible?a("el-dialog",{attrs:{title:"添加Ftp",visible:e.dialogAddFormVisible,width:"500px","append-to-body":""},on:{"update:visible":function(t){e.dialogAddFormVisible=t}}},[a("el-form",{attrs:{"label-width":"160px"}},[a("el-form-item",{attrs:{label:"Ftp所属集群名："}},[a("el-select",{staticStyle:{width:"240px"},attrs:{filterable:"",size:"mini",clearable:"",placeholder:"请选择Ftp所属集群"},on:{change:function(t){return e.companyChange()}},model:{value:e.companyValue,callback:function(t){e.companyValue=t},expression:"companyValue"}},e._l(e.companyList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.clusterName,value:e.id}})})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Ftp名称："}},[a("el-select",{staticStyle:{width:"240px"},attrs:{filterable:"",size:"mini",clearable:"",placeholder:"请选择Ftp"},model:{value:e.machineValue,callback:function(t){e.machineValue=t},expression:"machineValue"}},e._l(e.machineList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.closeAddFormDialog()}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitAddForm()}}},[e._v("确 定")])],1)],1):e._e()],1)},i=[],r=(a("7f7f"),a("c5f6"),a("c524"),a("9835")),l=a("ef39"),n={props:{groupId:Number,groupInfo:{type:Object}},components:{"ftp-add":l["default"]},data:function(){return{ftpTable:[],ftpTotal:10,ftpLoading:!1,ftpQueryParams:{pageNo:1,pageSize:5,groupId:void 0},dialogCreateFormVisible:!1,mark:0,dialogAddFormVisible:!1,companyList:[],companyValue:"",machineList:[],machineValue:""}},created:function(){console.log("this.groupId :",this.groupId),this.ftpQueryParams.groupId=this.groupId,this.getFtpTableData()},methods:{getFtpTableData:function(){var e=this;this.ftpTable=[],this.ftpLoading=!0,Object(r["r"])(this.ftpQueryParams).then((function(t){e.ftpTable=t.data.records,e.ftpTotal=t.data.total,e.ftpLoading=!1}))},handleDelete:function(e){var t=this;console.log("to del Ftp",e);var a=e.name,s={groupId:this.groupId,ftpId:e.id};this.$confirm('是否确认从工作组中删除名为"'+a+'"的Ftp?',"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["f"])(s).then((function(e){200==e.code?(t.msgSuccess("删除成功"),t.getFtpTableData()):t.msgError(e.msg)}))})).catch((function(e){}))},openCreateForm:function(){this.mark=0,this.dialogCreateFormVisible=!0},submitCreateForm:function(){this.$refs.ftpAdd.submitCreateForm()},closeCreateForm:function(){this.dialogCreateFormVisible=!1},openAddFormDialog:function(){var e=this;this.dialogAddFormVisible=!0,Object(r["j"])().then((function(t){e.companyList=t.data}))},companyChange:function(){var e=this;console.log("this.companyValue",this.companyValue);var t={clusterId:this.companyValue};this.machineList=[],this.machineValue="",Object(r["q"])(t).then((function(t){e.machineList=t.data}))},closeAddFormDialog:function(){this.dialogAddFormVisible=!1,this.companyList=[],this.machineList=[],this.companyValue="",this.machineValue=""},submitAddForm:function(){var e=this;console.log("queren",this.companyValue,this.machineValue);var t={groupId:this.groupId,ftpId:this.machineValue};Object(r["a"])(t).then((function(t){200==t.code?(e.msgSuccess("新增Ftp成功"),e.closeAddFormDialog(),e.getFtpTableData()):e.msgError(t.msg)}))}}},o=n,c=(a("0124"),a("2877")),u=Object(c["a"])(o,s,i,!1,null,"38cc7f2b",null);t["default"]=u.exports},adde:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mainc"},[a("div",{staticStyle:{width:"100%"}},[a("el-row",{staticClass:"mainCon",attrs:{type:"flex",gutter:24,align:"center"}},[a("el-col",{attrs:{span:11}},[a("div",{staticClass:"leftHeader"},[a("div",{staticStyle:{"font-size":"16px"}},[e._v("可添加成员")]),e._v(" "),a("div",[a("el-input",{attrs:{placeholder:"请输入姓名或ID",clearable:"",size:"mini"},on:{input:e.getStaffList},model:{value:e.searchName,callback:function(t){e.searchName=t},expression:"searchName"}})],1)]),e._v(" "),a("el-table",{ref:"staffTable",attrs:{data:e.staffList,border:"",fit:"",height:"350px"},on:{"selection-change":e.handleStaffChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"姓名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.nickName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"ID",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.userName))])]}}])})],1)],1),e._v(" "),a("el-col",{staticClass:"middleBtn",attrs:{span:2}},[a("el-button",{staticStyle:{margin:"auto -15px"},attrs:{type:"primary",disabled:!e.staffData.length,icon:"el-icon-arrow-right"},on:{click:e.addStaff}},[e._v("添加")])],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("div",{staticClass:"rightHeader"},[a("div",{staticStyle:{"font-size":"16px"}},[e._v("已添加组成员")]),e._v(" "),a("div",[a("el-button",{attrs:{type:"danger",size:"mini",disabled:!e.selectedStaffData.length},on:{click:e.removeStaff}},[e._v("删除")])],1)]),e._v(" "),a("el-table",{ref:"selectedStaffTable",attrs:{data:e.selectedStaffList,border:"",fit:"",height:"350px"},on:{"selection-change":e.handleSelectedStaffChange}},[a("el-table-column",{attrs:{selectable:e.selectAble,type:"selection",width:"55"}}),e._v(" "),a("el-table-column",{attrs:{label:"姓名",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.nickName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"ID",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.userName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"角色",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{filterable:"",size:"mini",placeholder:"请选择","value-key":"key"},model:{value:t.row.isAdmin,callback:function(a){e.$set(t.row,"isAdmin",a)},expression:"scope.row.isAdmin"}},e._l(e.staffOptions,(function(e){return a("el-option",{key:e.key,attrs:{label:e.display_name,value:e.key}})})),1)]}}])})],1)],1)],1)],1)])},i=[],r=(a("ac6a"),a("75fc")),l=(a("c5f6"),a("9835")),n={props:{groupID:{type:Number},tenantID:{type:Number}},data:function(){return{staffTemp:{userName:"",nickName:"",staffTypeId:""},searchName:"",beginSelecMem:[],staffList:[],selectedStaffList:[],staffData:[],selectedStaffData:[],tableKey:0,staffOptions:[{key:"0",display_name:"管理员"},{key:"1",display_name:"普通用户"}]}},created:function(){console.log("接收组ID",this.groupID),console.log("接收组已有租户ID",this.tenantID),this.getStaffList(),this.getSelectedStaffList()},methods:{getStaffList:function(){var e=this,t=new FormData;t.append("condition",this.searchName),t.append("groupId",this.groupID),Object(l["i"])(t).then((function(t){console.log(t),e.staffList=t.data,e.searchListSave=e.staffList}))},getSelectedStaffList:function(){var e=this,t=new FormData;t.append("groupId",this.groupID),Object(l["A"])(t).then((function(t){console.log(t),e.selectedStaffList=Object(r["a"])(t.data),e.beginSelecMem=Object(r["a"])(t.data)}))},handleStaffChange:function(e){var t=this;console.log("勾选，将左边表格选择项存入staffData中",e),this.staffData=[],e&&e.forEach((function(e){e&&t.staffData.push(e)}))},addStaff:function(){var e=this;setTimeout((function(){e.$refs["staffTable"].clearSelection(),e.$refs["selectedStaffTable"].clearSelection()}),0);var t=!1;if(this.selectedStaffList.forEach((function(a){if(e.staffData[0]&&a.userName===e.staffData[0].userName)return t=!0,void alert("此员工已添加")})),!1===t){this.staffData.forEach((function(t){t.isAdmin="1",e.selectedStaffList.push(t)}));for(var a=0;a<this.staffList.length;a++)for(var s=0;s<this.staffData.length;s++)this.staffList[a]&&this.staffData[s]&&this.staffList[a].userName===this.staffData[s].userName&&this.staffList.splice(a,1)}},removeStaff:function(){var e=this;setTimeout((function(){e.$refs["staffTable"].clearSelection(),e.$refs["selectedStaffTable"].clearSelection()}),0),this.selectedStaffData.forEach((function(t){e.staffList.push(t)}));for(var t=0;t<this.selectedStaffList.length;t++)for(var a=0;a<this.selectedStaffData.length;a++)this.selectedStaffList[t]&&this.selectedStaffData[a]&&this.selectedStaffList[t].userName===this.selectedStaffData[a].userName&&this.selectedStaffList.splice(t,1)},handleSelectedStaffChange:function(e){var t=this;this.selectedStaffData=[],e&&e.forEach((function(e){e&&t.selectedStaffData.push(e)}))},selectAble:function(e,t){return e.userId!=this.tenantID},finishMem:function(){var e=this,t=_.isEqual(this.selectedStaffList,this.beginSelecMem);console.log("ChangeData",t),t?this.$emit("close-member"):this.$confirm("检测到未保存的内容，是否在离开页面前保存修改？","警告",{distinguishCancelAndClose:!0,confirmButtonText:"保存",cancelButtonText:"放弃修改",type:"warning"}).then((function(){e.modifyStaff()})).catch((function(t){console.log("action",t),"cancel"===t?(e.$message({type:"info",message:"放弃修改并离开页面"}),e.$emit("close-member")):e.$message({type:"info",message:"停留在当前页面"})}))},modifyStaff:function(){var e=this,t=!1;console.log("修改前表格",this.selectedStaffList);for(var a=0;a<this.selectedStaffList.length;a++){if(0!=this.selectedStaffList[a].isAdmin&&1!=this.selectedStaffList[a].isAdmin){t=!0;break}t=!1}if(!1===t){var s={groupId:this.groupID,sysUserBriefList:this.selectedStaffList};Object(l["c"])(s).then((function(t){e.$notify({title:"成功",message:"修改成功",type:"success",duration:2e3}),e.closePage(),e.$emit("refresh-list")}))}else this.$message({showClose:!0,message:"请检查人员是否分配角色",type:"warning"})},closePage:function(){this.$emit("close-member")}}},o=n,c=(a("b736"),a("2877")),u=Object(c["a"])(o,s,i,!1,null,"cc552aa0",null);t["default"]=u.exports},b495:function(e,t,a){"use strict";var s=a("3a8b"),i=a.n(s);i.a},b736:function(e,t,a){"use strict";var s=a("f2fb"),i=a.n(s);i.a},c524:function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"b",(function(){return r})),a.d(t,"e",(function(){return l})),a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return o}));var s=a("b775");function i(e){return Object(s["a"])({url:"/metadata/sysFtpInfo/searchSysFtpInfo",method:"post",data:e})}function r(e){return Object(s["a"])({url:"/metadata/sysFtpInfo/insertSysFtp",method:"post",data:e})}function l(e){return Object(s["a"])({url:"/metadata/sysFtpInfo/updateSysFtp",method:"post",data:e})}function n(e){return Object(s["a"])({url:"/metadata/sysFtpInfo/deleteFtp",method:"post",data:e})}function o(e){return Object(s["a"])({url:"/metadata/sysFtpInfo/queryALLSysFtpInfoByFtpId"+e,method:"get"})}},c9a5:function(e,t,a){"use strict";var s=a("8ec9"),i=a.n(s);i.a},ccbe:function(e,t,a){"use strict";a.d(t,"h",(function(){return i})),a.d(t,"r",(function(){return r})),a.d(t,"u",(function(){return l})),a.d(t,"c",(function(){return n})),a.d(t,"v",(function(){return o})),a.d(t,"j",(function(){return c})),a.d(t,"k",(function(){return u})),a.d(t,"l",(function(){return d})),a.d(t,"i",(function(){return h})),a.d(t,"b",(function(){return m})),a.d(t,"f",(function(){return p})),a.d(t,"p",(function(){return f})),a.d(t,"q",(function(){return g})),a.d(t,"g",(function(){return b})),a.d(t,"o",(function(){return v})),a.d(t,"a",(function(){return _})),a.d(t,"d",(function(){return S})),a.d(t,"e",(function(){return y})),a.d(t,"t",(function(){return k})),a.d(t,"n",(function(){return C})),a.d(t,"s",(function(){return D})),a.d(t,"m",(function(){return I}));var s=a("b775");function i(){return Object(s["a"])({url:"/permission/system/sysTenant/parentTenantList",method:"get"})}function r(e){return Object(s["a"])({url:"/permission/system/sysTenant/queryTenantIByClusterName",method:"get",params:e})}function l(e){return Object(s["a"])({url:"/permission/system/sysTenant/tenantList",method:"post",data:e})}function n(e){return Object(s["a"])({url:"/permission/system/sysTenant/createTenant",method:"post",data:e})}function o(e){return Object(s["a"])({url:"/permission/system/sysTenant/updateTenant",method:"post",data:e})}function c(e){return Object(s["a"])({url:"/permission/system/sysTenant/queryAssignableResource",method:"get",params:e})}function u(e){return Object(s["a"])({url:"/metadata/sysInterfaceMachineInfo/queryMachineNameByClusterAlias",method:"get",params:e})}function d(e){return Object(s["a"])({url:"/permission/system/sysTenant/queryMachineNameListByTenantId",method:"get",params:e})}function h(){return Object(s["a"])({url:"/permission/system/sysTenant/provList",method:"get"})}function m(e){return Object(s["a"])({url:"/permission/system/sysTenant/allocatingResources",method:"post",data:e})}function p(e){return Object(s["a"])({url:"/permission/system/sysTenant/getTenantBasicInfo",method:"get",params:e})}function f(e){return Object(s["a"])({url:"/permission/system/sysTenant/querySubTenantListByParentId",method:"post",data:e})}function g(e){return Object(s["a"])({url:"/permission/system/sysTenant/querySubTenantMachineListByParentId",method:"post",data:e})}function b(e){return Object(s["a"])({url:"/permission/system/sysTenant/getTenantInfoByTenantId",method:"get",params:e})}function v(e){return Object(s["a"])({url:"/permission/system/sysTenant/queryQuotaByTenantId",method:"get",params:e})}function _(e){return Object(s["a"])({url:"/permission/system/sysTenant/addMachine",method:"post",data:e})}function S(e){return Object(s["a"])({url:"/permission/system/sysTenant/deleteMachine",method:"post",data:e})}function y(e){return Object(s["a"])({url:"/permission/system/sysTenant/deleteTenant",method:"get",params:e})}function k(e){return Object(s["a"])({url:"/permission/system/sysTenant/resetTenantPassword",method:"get",params:e})}function C(e){return Object(s["a"])({url:"/permission/system/user/queryOffice",method:"get",params:e})}function D(e){return Object(s["a"])({url:"/permission/system/sysTenant/queryTenantIInfoByUserId",method:"get",params:e})}function I(e){return Object(s["a"])({url:"/permission/system/sysTenant/queryMachineNameListByUserId",method:"get",params:e})}},ce45:function(e,t,a){"use strict";a.d(t,"e",(function(){return i})),a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return n})),a.d(t,"d",(function(){return o}));var s=a("b775");function i(e){return Object(s["a"])({url:"/metadata/sysInterfaceMachineInfo/searchSysInterfaceMachine",method:"post",data:e})}function r(e){return Object(s["a"])({url:"/metadata/sysInterfaceMachineInfo/addSysInterfaceMachine",method:"post",data:e})}function l(e){return Object(s["a"])({url:"/metadata/sysInterfaceMachineInfo/editSysInterfaceMachine",method:"post",data:e})}function n(e){return Object(s["a"])({url:"/metadata/sysInterfaceMachineInfo/deleteSysInterfaceMachine",method:"post",data:e})}function o(e){return Object(s["a"])({url:"/metadata/sysInterfaceMachineInfo/queryALLSysInterfaceMachineInfoByMachieId"+e,method:"get"})}},d361:function(e,t,a){},ef39:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"createForm",attrs:{model:e.createForm,rules:e.createFormRules,"label-width":"180px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Ftp名称：",prop:"name"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"Ftp名称",size:"small"},model:{value:e.createForm.name,callback:function(t){e.$set(e.createForm,"name",t)},expression:"createForm.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Ftp所属集群：",prop:"clusterName"}},[a("el-select",{attrs:{filterable:"",clearable:"",placeholder:"Ftp所属集群",size:"small"},model:{value:e.createForm.clusterName,callback:function(t){e.$set(e.createForm,"clusterName",t)},expression:"createForm.clusterName"}},e._l(e.clusterList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.clusterName,value:e.clusterName}})})),1),e._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.onAddCluster}},[e._v("新增集群")])],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Ftp IP：",prop:"ip"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"Ftp IP",size:"small"},model:{value:e.createForm.ip,callback:function(t){e.$set(e.createForm,"ip",t)},expression:"createForm.ip"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Ftp端口：",prop:"port"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"Ftp端口",size:"small"},model:{value:e.createForm.port,callback:function(t){e.$set(e.createForm,"port",t)},expression:"createForm.port"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Ftp用户名：",prop:"userName"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{placeholder:"Ftp用户名",size:"small"},model:{value:e.createForm.userName,callback:function(t){e.$set(e.createForm,"userName",t)},expression:"createForm.userName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Ftp密码：",prop:"password"}},[a("el-input",{staticStyle:{width:"240px"},attrs:{type:"password",placeholder:"Ftp密码",size:"small"},model:{value:e.createForm.password,callback:function(t){e.$set(e.createForm,"password",t)},expression:"createForm.password"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"Ftp协议：",prop:"protocol"}},[a("el-select",{staticStyle:{width:"240px"},attrs:{placeholder:"Ftp协议",size:"small"},model:{value:e.createForm.protocol,callback:function(t){e.$set(e.createForm,"protocol",t)},expression:"createForm.protocol"}},[a("el-option",{attrs:{label:"FTP",value:"FTP"}}),e._v(" "),a("el-option",{attrs:{label:"SFTP",value:"SFTP"}})],1)],1)],1)],1)],1),e._v(" "),e.open?a("el-dialog",{attrs:{title:"添加集群",top:"40px",visible:e.open,width:"1000px","append-to-body":""},on:{"update:visible":function(t){e.open=t}}},[a("cluster-add",{ref:"modelFromSon",on:{"close-add":e.addClusterClose}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addCluster}},[e._v("确 定")]),e._v(" "),a("el-button",{on:{click:function(t){e.open=!1}}},[e._v("取 消")])],1)],1):e._e()],1)},i=[],r=(a("7f7f"),a("c5f6"),a("c524")),l=a("9835"),n=a("6941"),o={components:{"cluster-add":n["default"]},props:{FtpInfo:{},Mark:Number},data:function(){return{dialogCreateFormVisible:!1,open:!1,clusterList:[],createForm:{name:"",ip:"",userName:"",password:"",protocol:"",clusterName:"",port:""},createFormRules:{name:[{required:!0,message:"Ftp名称不能为空",trigger:"blur"}],ip:[{required:!0,message:"Ftp IP不能为空",trigger:"blur"}],userName:[{required:!1,message:"Ftp用户名不能为空",trigger:"blur"}],password:[{required:!1,message:"Ftp密码不能为空",trigger:"blur"}],protocol:[{required:!0,message:"Ftp数据存放路径不能为空",trigger:"blur"}],clusterName:[{required:!1,message:"请选择Ftp所属集群",trigger:"change"}],port:[{required:!0,message:"Ftp端口不能为空",trigger:"blur"}]},ftpId:void 0}},created:function(){this.queryClusterInfoList(),1===this.Mark&&this.handleUpdate()},methods:{queryClusterInfoList:function(){var e=this;this.clusterList=[],Object(l["j"])().then((function(t){e.clusterList=t.data}))},onAddCluster:function(){this.open=!0},addCluster:function(){this.$refs.modelFromSon.submitForm()},addClusterClose:function(){this.open=!1,this.queryClusterInfoList()},submitCreateForm:function(){var e=this;this.$refs["createForm"].validate((function(t){t&&(console.log(e.createForm),Object(r["b"])(e.createForm).then((function(t){200==t.code?(e.msgSuccess("新增Ftp成功"),e.closeCreateForm()):e.msgError(t.msg)})))}))},closeCreateForm:function(){this.$refs["createForm"].resetFields(),this.dialogCreateFormVisible=!1,this.createForm.name="",this.createForm.ip="",this.createForm.userName="",this.createForm.password="",this.createForm.protocol="",this.createForm.clusterName="",this.createForm.port="",this.$emit("close-addFtp")},handleUpdate:function(){this.ftpId=this.FtpInfo.id,this.createForm.name=this.FtpInfo.name,this.createForm.ip=this.FtpInfo.ip,this.createForm.userName=this.FtpInfo.userName,this.createForm.password=this.FtpInfo.password,this.createForm.protocol=this.FtpInfo.protocol,this.createForm.clusterName=this.FtpInfo.clusterName,this.createForm.port=this.FtpInfo.port},submitUpdateForm:function(){var e=this;this.$refs["createForm"].validate((function(t){if(t){var a=Object.assign({id:e.ftpId},e.createForm);console.log("updateObj  :",a),Object(r["e"])(a).then((function(t){200==t.code?(e.msgSuccess("修改Ftp成功"),e.closeCreateForm()):e.msgError(t.msg)}))}}))}}},c=o,u=a("2877"),d=Object(u["a"])(c,s,i,!1,null,"1a881788",null);t["default"]=d.exports},f2fb:function(e,t,a){},fd1a:function(e,t,a){}}]);